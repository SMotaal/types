{"version":3,"file":"browser.js","sources":["../../browser/dynamic-import.js","../../packages/markout/elements/markout-content.js","../../packages/markout/lib/hashout.js","../../packages/markout/lib/browser.js"],"sourcesContent":["﻿export default async function dynamicImport(specifier, referrer) {\n\tif (!('resolve' in dynamicImport)) {\n\t\tconst {assign, create, defineProperties, freeze, getOwnPropertyDescriptors, setPrototypeOf} = Object;\n\t\tlet base;\n\t\tconst resolve = freeze((specifier, referrer) => `${new URL(specifier, referrer || base || location)}`);\n\t\tconst properties = {resolve};\n\t\ttry {\n\t\t\tproperties.import = freeze((1, eval)(`url => import(url)`));\n\t\t\tproperties.export = freeze(() => {\n\t\t\t\tthrow Error(`Invalid invokation of dynamicImport.exports()`);\n\t\t\t});\n\t\t} catch (exception) {\n\t\t\tconst reflect = freeze(getOwnPropertyDescriptors.bind(null));\n\t\t\tconst createElement = document.createElement.bind(document);\n\t\t\tconst insertElement = document.appendChild.bind(document.head);\n\t\t\tconst records = {};\n\t\t\tconst resolvers = {};\n\t\t\tconst binders = new WeakMap();\n\t\t\tconst proxy = new Proxy(freeze(create(null)), {\n\t\t\t\tget: (target, property, receiver) => {\n\t\t\t\t\tconst binder = binders.get(receiver);\n\t\t\t\t\tif (binder && binders.delete(setPrototypeOf(receiver, null)))\n\t\t\t\t\t\treturn freeze(defineProperties(receiver, {...binder(reflect), ...reflect(receiver)}))[property];\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst Import = class Import {\n\t\t\t\tconstructor(url) {\n\t\t\t\t\tconst {wrap = Import.wrap, inject = Import.inject} = new.target;\n\t\t\t\t\tthis.url = url;\n\t\t\t\t\tthis.namespace = create(proxy, {\n\t\t\t\t\t\t[Symbol.toStringTag]: {value: `Module‹${url}›`},\n\t\t\t\t\t});\n\t\t\t\t\tthis.source = wrap(url, (this.binder = `reflect => reflect(namespace)`), (this.loader = import.meta.url));\n\t\t\t\t\tthis.promise = inject(this);\n\t\t\t\t\tfreeze(this);\n\t\t\t\t}\n\t\t\t\tstatic wrap(url, binder, loader) {\n\t\t\t\t\treturn `import * as namespace from \"${url}\";\\nimport loader from \"${loader}\";\\nloader.export(\"${url}\", ${binder});`;\n\t\t\t\t}\n\t\t\t\tstatic inject({url, source: textContent, namespace, crossOrigin = 'anonymous', type = 'module'}) {\n\t\t\t\t\tlet timeout;\n\t\t\t\t\tconst script = assign(createElement('script'), {type: 'module', crossOrigin, textContent});\n\t\t\t\t\tconst promise = new Promise(\n\t\t\t\t\t\tresolve => (timeout = setTimeout((script.onerror = resolvers[url] = resolve), 5000, {type: 'timeout'})),\n\t\t\t\t\t).then(event => {\n\t\t\t\t\t\tresolvers[url] = script.onerror = void clearTimeout(timeout);\n\t\t\t\t\t\tif (!event || event.type === 'load') return namespace;\n\t\t\t\t\t\tthrow Error(`Failed to load \"${url}\"`);\n\t\t\t\t\t});\n\t\t\t\t\tinsertElement(script).remove();\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfreeze(freeze(Import.prototype).constructor);\n\n\t\t\tproperties.import = freeze(url => {\n\t\t\t\tconst {[url]: record = (records[url] = new Import(resolve(url)))} = records;\n\t\t\t\treturn record.promise;\n\t\t\t});\n\n\t\t\tproperties.export = freeze((url, binder) => {\n\t\t\t\tconst {[url]: record} = records;\n\t\t\t\tif (!record || typeof binder !== 'function' || `${binder}` !== record.binder || binders.has(record.namesapce))\n\t\t\t\t\tthrow Error(`Invalid invokation of dynamicImport.exports()`);\n\t\t\t\tbinders.set(record.namespace, binder);\n\t\t\t\tresolvers[url] && resolvers[url]();\n\t\t\t});\n\t\t}\n\n\t\tdefineProperties(dynamicImport, {\n\t\t\t...getOwnPropertyDescriptors(freeze(properties)),\n\t\t\tbase: {get: () => base, set: value => (base = `${new URL(value)}`)},\n\t\t});\n\t}\n\treturn dynamicImport.import(dynamicImport.resolve(specifier, referrer));\n}\n","﻿import dynamicImport from '/browser/dynamic-import.js';\nimport {html, css, Component, Assets} from '../lib/components.js';\nimport * as content from '../lib/content.js';\n\nconst {\n\t'markout-content-dom-mutations': DOM_MUTATIONS = undefined,\n\t'markout-content-break-normalization': BREAK_NORMALIZATION = undefined,\n\t'markout-content-heading-normalization': HEADING_NORMALIZATION = true,\n\t'markout-content-paragraph-normalization': PARAGRAPH_NORMALIZATION = true,\n\t'markout-content-checklist-normalization': CHECKLIST_NORMALIZATION = true,\n\t'markout-content-declarative-styling': DECLARATIVE_STYLING = true,\n\t'markout-content-source-text-rendering': SOURCE_TEXT_RENDERING = true,\n\t'markout-content-asset-remapping': ASSET_REMAPPING = true,\n\t'markout-content-asset-initialization': ASSET_INITIALIZATION = true,\n} = import.meta;\n\nexport class MarkoutContent extends Component {\n\tstatic get template() {\n\t\treturn super.set(\n\t\t\t'template',\n\t\t\thtml`\n\t\t\t\t<slot inert hidden style=\"display:none;\"></slot>\n\t\t\t\t<slot id=\"styles\" name=\"styles\"></slot>\n\t\t\t\t<div id=\"links\"></div>\n\t\t\t\t<div id=\"wrapper\">\n\t\t\t\t\t<slot id=\"content\" class=\"markout-content\" name=\"content\"></slot>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t);\n\t}\n\n\tstatic get shadowRoot() {\n\t\treturn super.set('shadowRoot', {mode: 'closed'});\n\t}\n\n\tstatic get assets() {\n\t\treturn super.set('assets', new Assets({base: new URL('../', import.meta.url)}, 'style:styles/markout.css'));\n\t}\n\n\tstatic get styles() {\n\t\treturn super.set(\n\t\t\t'styles',\n\t\t\tcss`\n\t\t\t\t@import \"${MarkoutContent.assets['style:styles/markout.css']}\";\n\n\t\t\t\t:host {\n\t\t\t\t\tpadding: 1rem 2rem;\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t}\n\n\t\t\t\t.hide {\n\t\t\t\t\topacity: 0;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t#wrapper {\n\t\t\t\t\t/* will-change: transition;\n\t\t\t\t\ttransition: 0 / 125ms, opacity 250ms / 250ms; */\n\t\t\t\t}\n\n\t\t\t\t#wrapper.hide {\n\t\t\t\t\twill-change: transition;\n\t\t\t\t\ttransition: 0 / 125ms, opacity 250ms / 250ms;\n\t\t\t\t}\n\n\t\t\t\t/* #content:not(.hide) { */\n\t\t\t\t\t/* will-change: transition; */\n\t\t\t\t\t/* transition: opacity 250ms / 250ms; */\n\t\t\t\t/* } */\n\n\t\t\t\t#content tt.opener:first-child,\n\t\t\t\t#content tt.closer:last-child {\n\t\t\t\t\tdisplay: none !important;\n\t\t\t\t}\n\n\t\t\t\t#content .markout-content {\n\t\t\t\t\tborder: 0.075rem solid #9992;\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tpadding: 1em 2em;\n\t\t\t\t\tpadding-inline-start: 2em;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tcontain: style;\n\t\t\t\t}\n\n\t\t\t\t@media only screen and (max-width: 45rem) {\n\t\t\t\t\t:host {\n\t\t\t\t\t\tfont-size: 85%;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`,\n\t\t);\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.name = `${this.tagName}-${++new.target.instance}`.toLocaleLowerCase();\n\n\t\t/** @type {HTMLSlotElement} */ const slot = this['::'];\n\t\tslot &&\n\t\t\tslot.addEventListener('slotchange', event => this.isConnected && this.updateMarkoutContent(slot), {\n\t\t\t\tpassive: true,\n\t\t\t});\n\t}\n\n\tconnectedCallback() {\n\t\t'renderedText' in this || this.renderMarkoutContent(this.sourceText);\n\t\tsuper.connectedCallback();\n\t}\n\n\tscrollToAnchor(anchor) {\n\t\t/** @type {HTMLAnchorElement} */\n\t\tlet target;\n\t\tconst {'::content': content} = this;\n\t\tif (anchor)\n\t\t\t(target = content.querySelector(`a[id=\"${anchor}\"]`))\n\t\t\t\t? target.scrollIntoView({behavior: 'smooth', block: 'start', inline: 'nearest'})\n\t\t\t\t: console.warn('scrollIntoView: %o', {anchor, target});\n\t}\n\n\tasync updateMarkoutContent(slot = this['::']) {\n\t\tconst assignedNodes = slot && slot.assignedNodes();\n\t\tif (assignedNodes.length) {\n\t\t\treturn this.renderMarkoutContent(this.sourceText || '');\n\t\t}\n\t}\n\n\t/** @param {string} [sourceText] */\n\tasync renderMarkoutContent(sourceText) {\n\t\t/** @type {HTMLSlotElement} */\n\t\tlet contentSlot;\n\t\t/** @type {HTMLSlotElement} */\n\t\tlet wrapperSlot;\n\t\t/** @type {string} */\n\t\tlet sourceURL;\n\n\t\t({'::content': contentSlot, '#wrapper': wrapperSlot, sourceURL} = this);\n\n\t\targuments.length || (sourceText = this.sourceText);\n\n\t\tif (sourceText === this['(markout source)']) return;\n\t\tthis['(markout fragment)'] = undefined;\n\t\tif (!sourceText) return void (this['(markout source)'] = contentSlot.textContent = '');\n\n\t\twrapperSlot.style.transition = contentSlot.style.transition = '0s';\n\t\tcontentSlot.hidden = wrapperSlot.hidden = true;\n\t\tcontentSlot.classList.add('hide');\n\t\twrapperSlot.classList.add('hide');\n\n\t\tawait new Promise(resolve => requestAnimationFrame(resolve));\n\n\t\twrapperSlot.style.transition = contentSlot.style.transition = '';\n\t\twrapperSlot.classList.remove('hide');\n\t\twrapperSlot.hidden = false;\n\n\t\tcontentSlot.textContent = '';\n\t\tconst fragment = (this['(markout fragment)'] = await this.appendMarkoutContent(sourceText, contentSlot, sourceURL));\n\n\t\tthis['(markout source)'] = sourceText;\n\n\t\tconst timeout = new Promise(resolve => setTimeout(resolve, 150));\n\n\t\t(ASSET_INITIALIZATION === true || (ASSET_INITIALIZATION !== false && DOM_MUTATIONS !== false)) &&\n\t\t\t(fragment.assets.modules && fragment.assets.modules.forEach(this.instantiateLinkedModule, this),\n\t\t\tfragment.assets.scripts && fragment.assets.scripts.forEach(this.instantiateLinkedScript, this));\n\n\t\tawait Promise.race([MarkoutContent.assets['style:styles/markout.css'], timeout]);\n\n\t\tawait timeout;\n\n\t\tcontentSlot.classList.remove('hide');\n\t\tcontentSlot.hidden = false;\n\n\t\tif (this.rewriteAnchors) {\n\t\t\tconst anchors = contentSlot.querySelectorAll('a[href]');\n\t\t\tanchors && this.rewriteAnchors([...anchors]);\n\t\t}\n\t}\n\n\t/** @param {string} sourceText @param {HTMLSlotElement} contentSlot @param {string} baseURL */\n\tasync appendMarkoutContent(sourceText = this.sourceText, contentSlot = this['::content'], baseURL = this.baseURI) {\n\t\tconst {fragment} = content.createRenderedFragment(sourceText);\n\n\t\tfragment.baseURL = baseURL;\n\t\tDOM_MUTATIONS === false || this.normalizeMarkoutFragment(fragment);\n\n\t\tcontentSlot.appendChild(\n\t\t\tawait (fragment.instantiated || (fragment.instantiated = this.instantiateMarkoutFragment(fragment))),\n\t\t);\n\n\t\treturn {slot: contentSlot, sourceText, fragment, ...fragment};\n\t}\n\n\t/** @param {DocumentFragment} fragment */\n\tnormalizeMarkoutFragment(fragment) {\n\t\tDOM_MUTATIONS !== false &&\n\t\t\t((BREAK_NORMALIZATION === true || DOM_MUTATIONS === true) && content.normalizeBreaksInFragment(fragment),\n\t\t\t(HEADING_NORMALIZATION === true || DOM_MUTATIONS === true) && content.normalizeHeadingsInFragment(fragment),\n\t\t\t(PARAGRAPH_NORMALIZATION === true || DOM_MUTATIONS === true) && content.normalizeParagraphsInFragment(fragment),\n\t\t\t(CHECKLIST_NORMALIZATION === true || DOM_MUTATIONS === true) && content.normalizeChecklistsInFragment(fragment),\n\t\t\t(DECLARATIVE_STYLING === true || DOM_MUTATIONS === true) && content.applyDeclarativeStylingInFragment(fragment));\n\n\t\treturn fragment;\n\t}\n\n\tasync instantiateMarkoutFragment(fragment) {\n\t\tif (fragment.instantiated) return fragment.instantiated;\n\n\t\tconst promises = [];\n\n\t\t(SOURCE_TEXT_RENDERING === true || (SOURCE_TEXT_RENDERING !== false && DOM_MUTATIONS !== false)) &&\n\t\t\tpromises.push(content.renderSourceTextsInFragment(fragment));\n\n\t\t(ASSET_REMAPPING === true || (ASSET_REMAPPING !== false && DOM_MUTATIONS !== false)) &&\n\t\t\tpromises.push(this.linkMarkoutFragment(fragment));\n\n\t\tpromises.length && (await Promise.all(promises));\n\n\t\treturn fragment;\n\t}\n\n\tasync linkMarkoutFragment(fragment) {\n\t\tif (fragment.instantiated) return fragment.instantiated;\n\n\t\tif (ASSET_REMAPPING) {\n\t\t\tcontent.populateAssetsInFragment(fragment);\n\n\t\t\tconst baseURL = fragment.baseURL || fragment.baseURI;\n\n\t\t\tfor (const link of fragment.assets) {\n\t\t\t\tconst {base: baseAttribute, src: srcAttribute} = link.attributes;\n\t\t\t\tconst src = srcAttribute.value;\n\t\t\t\tconst base = baseAttribute ? baseAttribute.value : baseURL;\n\t\t\t\tbaseAttribute && link.removeAttribute('base');\n\t\t\t\tlink.setAttribute('link-base', base);\n\t\t\t\tlink.setAttribute('link-src', src);\n\t\t\t\tlink.setAttribute('src', (link.src = new URL(src, base)));\n\t\t\t}\n\n\t\t\tfragment.assets.stylesheets &&\n\t\t\t\tfragment.assets.stylesheets.length &&\n\t\t\t\tfragment.prepend(\n\t\t\t\t\tObject.assign(document.createElement('style'), {\n\t\t\t\t\t\ttextContent: fragment.assets.stylesheets\n\t\t\t\t\t\t\t.map(stylesheet => (stylesheet.remove(), `@import \"${stylesheet.src}\";`))\n\t\t\t\t\t\t\t.join('\\n'),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t}\n\n\t\treturn fragment;\n\t}\n\n\t/** @param {HTMLScriptElement} module */\n\tinstantiateLinkedModule(module) {\n\t\tif (module['(markout host)'] === this || !module.isConnected) return;\n\t\tmodule['(markout host)'] = this;\n\t\tmodule.before(document.createComment(module.outerHTML.trim()));\n\t\tmodule.remove();\n\t\tdynamicImport(module.src);\n\t}\n\n\t/** @param {HTMLScriptElement} script */\n\tinstantiateLinkedScript(script) {\n\t\tif (script['(markout host)'] === this || !script.isConnected) return;\n\t\tif (script.parentElement.nodeName === 'OUTPUT') {\n\t\t\tscript['(markout host)'] = this;\n\t\t\tthis.evaluateMarkoutScript(script);\n\t\t}\n\t}\n\n\tasync evaluateMarkoutScript(script) {\n\t\tconst {src} = script;\n\t\tconst sourceText = await (await fetch(src)).text();\n\t\tawait new Promise(requestAnimationFrame);\n\t\tdocument['--currentScript--'] = script;\n\t\t(1, eval)(`${sourceText}\\ndelete document['--currentScript--']`);\n\t}\n\n\t/// Properties\n\tget sourceText() {\n\t\tconst {childNodes, firstElementChild, renderedText} = this;\n\t\tif (renderedText || renderedText === '') return renderedText;\n\n\t\tif (firstElementChild && firstElementChild.nodeName === 'TEMPLATE') return firstElementChild.innerHTML.trim() || '';\n\n\t\tif (childNodes.length) {\n\t\t\tconst innerHTML = this.innerHTML;\n\t\t\tconst [, indent] = /^\\n?([ \\t*]*|)/.exec(innerHTML);\n\t\t\treturn indent ? innerHTML.replace(new RegExp(`^${indent}`, 'mg'), '') : innerHTML.trim() || '';\n\t\t}\n\t}\n\n\tset sourceText(sourceText) {\n\t\tthis.renderMarkoutContent(sourceText);\n\t}\n}\n\ntry {\n\tcustomElements.define('markout-content', MarkoutContent);\n} catch (exception) {\n\tconsole.warn(exception);\n}\n","﻿// const RewritableURL = /^(\\.*(?=\\/)[^?#\\n]*\\/)(?:([^/?#\\n]+?)(?:(\\.[a-z]+)|)|)(\\?[^#]+|)(#.*|)$|/i;\nconst RewritableURL = /^(\\.*(?=\\/)[^?#\\n]*\\/|)(?:(?:([^/?#\\n]+?)(?:(\\.[a-z]+)|)|)|)(\\?[^#]+|)(#.*|)$|/i;\n\nconst {dir, dirxml, group, groupCollapsed, groupEnd, log} = console;\n\nexport const rewriteAnchors = (\n\tanchors,\n\t{sourceURL, baseURL, search, rootNode = document, debugging = import.meta['debug:hashout:anchor-rewrite']},\n) => {\n\tdebugging && groupCollapsed('%O ‹anchors› ', rootNode);\n\n\tfor (const anchor of anchors) {\n\t\tconst [matched, parent, name, extension = '.md', query = '', hash = ''] = RewritableURL.exec(\n\t\t\tanchor.getAttribute('href'),\n\t\t);\n\n\t\tdebugging && log({matched, parent, name, extension, query, hash});\n\n\t\tif (parent) {\n\t\t\tconst pathname = `${parent}${name ? `${name}${extension}` : ''}`;\n\n\t\t\tconst href =\n\t\t\t\tname && extension.toLowerCase() === '.md'\n\t\t\t\t\t? `${baseURL}${search}#${new URL(pathname, sourceURL).pathname}`\n\t\t\t\t\t: new URL(`${pathname}${query || ((!hash && search) || '')}${hash}`, sourceURL);\n\t\t\tanchor.href = href;\n\t\t} else if (hash) {\n\t\t\tanchor.href = `${location}${matched}`;\n\t\t} else {\n\t\t\tanchor.target || (anchor.target = '_blank');\n\t\t}\n\n\t\tdebugging && dirxml(anchor);\n\t}\n\n\tdebugging && groupEnd();\n};\n\n/// Debugging\nimport {debugging} from '/markout/lib/helpers.js';\n\ndebugging('hashout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\ttypeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bhashout|$)\\b/.test(location.search),\n\t'anchor-rewrite',\n]);\n","﻿import '../elements/markout-content.js';\nimport * as hashout from './hashout.js';\n\n(async () => {\n\tawait customElements.whenDefined('markout-content');\n\n\t/** @type {import('../elements/markout-content.js')['MarkoutContent']} */\n\tconst MarkoutContent = customElements.get('markout-content');\n\n\t/**\n\t * @typedef {HTMLAnchorElement} Anchor\n\t */\n\tconst ExtendedMarkoutContent = class extends MarkoutContent {\n\t\tasync load(src) {\n\t\t\tlet error;\n\t\t\targuments.length || (src = this.getAttribute('src'));\n\t\t\tif (!src) return;\n\t\t\tconst url = new URL(src, this.baseURI);\n\t\t\tconst response = await fetch(url);\n\t\t\tif (!response.ok) throw Error(`Failed to fetch ${url}`);\n\t\t\tconst text = await response.text();\n\t\t\tthis.sourceURL = url;\n\t\t\tthis.sourceText = text || '';\n\t\t}\n\n\t\t/**\n\t\t * @typedef {Array<Anchor>} Anchors\n\t\t * @param {Anchors} anchors\n\t\t */\n\t\trewriteAnchors(...anchors) {\n\t\t\tconst debugging = import.meta['debug:markout:anchor-rewrite'];\n\t\t\tconst rootNode = this;\n\t\t\tconst {sourceURL, baseURL = `/markout/`} = rootNode;\n\t\t\tconst search = location.search || '';\n\t\t\thashout.rewriteAnchors(anchors.flat(), {debugging, sourceURL, baseURL, search, rootNode});\n\t\t}\n\t};\n\n\tconst sections = document.body.querySelectorAll('markout-content[src]');\n\tif (sections) {\n\t\tconst {load, rewriteAnchors} = ExtendedMarkoutContent.prototype;\n\t\tfor (const section of sections) {\n\t\t\tsection.load || ((section.load = load), section.rewriteAnchors || (section.rewriteAnchors = rewriteAnchors)),\n\t\t\t\tsection.load().catch(exception => (section.sourceText = `<pre>${exception}</pre>`));\n\t\t}\n\t}\n})();\n\n/// Debugging\nimport {debugging} from '/markout/lib/helpers.js';\n\n// console.log(import.meta.url, /[?&]debug\\b/.test(import.meta.url));\n\ndebugging('markout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\t// /[?](?:.*[&]|)debug\\b/.test(import.meta.url) ||\n\t// (typeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bmarkout|$)\\b/.test(location.search)),\n\t/[?&]debug\\b/.test(import.meta.url) || /[?&]debug\\b/.test(location.search),\n\t'anchor-rewrite',\n]);\n"],"names":["content.createRenderedFragment","content.normalizeBreaksInFragment","content.normalizeHeadingsInFragment","content.normalizeParagraphsInFragment","content.normalizeChecklistsInFragment","content.applyDeclarativeStylingInFragment","content.renderSourceTextsInFragment","content.populateAssetsInFragment","hashout.rewriteAnchors"],"mappings":"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"}
{"version":3,"file":"browser.js","sources":["../../browser/dynamic-import.js","../../packages/markout/lib/entities.js","../../packages/markout/elements/markout-content.js","../../packages/markout/lib/hashout.js","../../packages/markout/lib/browser.js"],"sourcesContent":["﻿export default async function dynamicImport(specifier, referrer) {\n\tif (!('resolve' in dynamicImport)) {\n\t\tconst {assign, create, defineProperties, freeze, getOwnPropertyDescriptors, setPrototypeOf} = Object;\n\t\tlet base;\n\t\tconst resolve = freeze((specifier, referrer) => `${new URL(specifier, referrer || base || location)}`);\n\t\tconst properties = {resolve};\n\t\ttry {\n\t\t\tproperties.import = freeze((1, eval)(`url => import(url)`));\n\t\t\tproperties.export = freeze(() => {\n\t\t\t\tthrow Error(`Invalid invokation of dynamicImport.exports()`);\n\t\t\t});\n\t\t} catch (exception) {\n\t\t\tconst reflect = freeze(getOwnPropertyDescriptors.bind(null));\n\t\t\tconst createElement = document.createElement.bind(document);\n\t\t\tconst insertElement = document.appendChild.bind(document.head);\n\t\t\tconst records = {};\n\t\t\tconst resolvers = {};\n\t\t\tconst binders = new WeakMap();\n\t\t\tconst proxy = new Proxy(freeze(create(null)), {\n\t\t\t\tget: (target, property, receiver) => {\n\t\t\t\t\tconst binder = binders.get(receiver);\n\t\t\t\t\tif (binder && binders.delete(setPrototypeOf(receiver, null)))\n\t\t\t\t\t\treturn freeze(defineProperties(receiver, {...binder(reflect), ...reflect(receiver)}))[property];\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst Import = class Import {\n\t\t\t\tconstructor(url) {\n\t\t\t\t\tconst {wrap = Import.wrap, inject = Import.inject} = new.target;\n\t\t\t\t\tthis.url = url;\n\t\t\t\t\tthis.namespace = create(proxy, {\n\t\t\t\t\t\t[Symbol.toStringTag]: {value: `Module‹${url}›`},\n\t\t\t\t\t});\n\t\t\t\t\tthis.source = wrap(url, (this.binder = `reflect => reflect(namespace)`), (this.loader = import.meta.url));\n\t\t\t\t\tthis.promise = inject(this);\n\t\t\t\t\tfreeze(this);\n\t\t\t\t}\n\t\t\t\tstatic wrap(url, binder, loader) {\n\t\t\t\t\treturn `import * as namespace from \"${url}\";\\nimport loader from \"${loader}\";\\nloader.export(\"${url}\", ${binder});`;\n\t\t\t\t}\n\t\t\t\tstatic inject({url, source: textContent, namespace, crossOrigin = 'anonymous', type = 'module'}) {\n\t\t\t\t\tlet timeout;\n\t\t\t\t\tconst script = assign(createElement('script'), {type: 'module', crossOrigin, textContent});\n\t\t\t\t\tconst promise = new Promise(\n\t\t\t\t\t\tresolve => (timeout = setTimeout((script.onerror = resolvers[url] = resolve), 5000, {type: 'timeout'})),\n\t\t\t\t\t).then(event => {\n\t\t\t\t\t\tresolvers[url] = script.onerror = void clearTimeout(timeout);\n\t\t\t\t\t\tif (!event || event.type === 'load') return namespace;\n\t\t\t\t\t\tthrow Error(`Failed to load \"${url}\"`);\n\t\t\t\t\t});\n\t\t\t\t\tinsertElement(script).remove();\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfreeze(freeze(Import.prototype).constructor);\n\n\t\t\tproperties.import = freeze(url => {\n\t\t\t\tconst {[url]: record = (records[url] = new Import(resolve(url)))} = records;\n\t\t\t\treturn record.promise;\n\t\t\t});\n\n\t\t\tproperties.export = freeze((url, binder) => {\n\t\t\t\tconst {[url]: record} = records;\n\t\t\t\tif (!record || typeof binder !== 'function' || `${binder}` !== record.binder || binders.has(record.namesapce))\n\t\t\t\t\tthrow Error(`Invalid invokation of dynamicImport.exports()`);\n\t\t\t\tbinders.set(record.namespace, binder);\n\t\t\t\tresolvers[url] && resolvers[url]();\n\t\t\t});\n\t\t}\n\n\t\tdefineProperties(dynamicImport, {\n\t\t\t...getOwnPropertyDescriptors(freeze(properties)),\n\t\t\tbase: {get: () => base, set: value => (base = `${new URL(value)}`)},\n\t\t});\n\t}\n\treturn dynamicImport.import(dynamicImport.resolve(specifier, referrer));\n}\n","﻿import {entities} from '/markup/dist/tokenizer.browser.js';\n\nexport const {\n\tUnicodeIdentifier,\n\tMarkdownIdentityPrefixer,\n\tMarkdownIdentityJoiner,\n\tMarkdownIdentityWord,\n\tMarkdownIdentity,\n} = (({\n\traw = String.raw,\n\tIdentifierStart,\n\tIdentifierPart,\n\tUnicodeIdentifierStart = IdentifierStart.slice(2),\n\tUnicodeIdentifierPart = IdentifierPart.slice(2),\n\tUnicodeIdentifier = raw`[${UnicodeIdentifierStart}][${UnicodeIdentifierPart}]*`,\n\tMarkdownWordPrefixes = raw`$@`,\n\tMarkdownWordPrefix = raw`[${MarkdownWordPrefixes}]?`,\n\tMarkdownWord = raw`${MarkdownWordPrefix}${UnicodeIdentifier}`,\n\tMarkdownWordJoiners = raw` \\\\\\/:_\\-\\xA0\\u2000-\\u200B\\u202F\\u2060`,\n\tMarkdownWordJoiner = raw`[${MarkdownWordJoiners}]+`,\n\t// MarkdownIdentity = raw`(?:\\s|\\n|^)(${MarkdownWord}(?:${MarkdownWordJoiner}${MarkdownWord})*(?=\\b[\\s\\n]|$))`,\n\tMarkdownIdentity = raw`(?:\\s|\\n|^)(${MarkdownWord}(?:${MarkdownWordJoiner}${MarkdownWord})*)`,\n}) => ({\n\tUnicodeIdentifier: new RegExp(UnicodeIdentifier, 'u'),\n\tMarkdownIdentityPrefixer: new RegExp(raw`^[${MarkdownWordPrefixes}]?`, 'u'),\n\tMarkdownIdentityJoiner: new RegExp(raw`[${MarkdownWordJoiners}]+`, 'ug'),\n\tMarkdownIdentityWord: new RegExp(MarkdownWord, 'u'),\n\tMarkdownIdentity: new RegExp(MarkdownIdentity, 'u'),\n\t// MarkdownIdentitySeparators: new RegExp(raw`[${MarkdownWordPrefixes}${MarkdownWordJoiners}]+`, 'ug')\n}))(entities.es);\n","﻿import dynamicImport from '/browser/dynamic-import.js';\nimport {html, css, Component, Assets} from '../lib/components.js';\nimport * as renderer from '../lib/renderer.js';\nimport * as entities from '../lib/entities.js';\nimport {\n\tSourceTypeAttribute,\n\tMarkupModeAttribute,\n\tMarkupOptionsAttribute,\n\tMarkupSyntaxAttribute,\n} from '../lib/constants.js';\nimport * as markup from '/markup/dist/tokenizer.browser.js';\n\nconst {\n\t'markout-content-dom-mutations': DOM_MUTATIONS = undefined,\n\t'markout-content-breaks-normalization': BREAKS_NORMALIZATION = undefined,\n\t'markout-content-headings-normalization': HEADINGS_NORMALIZATION = true,\n\t'markout-content-paragraph-normalization': PARAGRAPHS_NORMALIZATION = true,\n\t'markout-content-declarative-styling': DECLARATIVE_STYLING = true,\n\t'markout-content-source-text-rendering': SOURCE_TEXT_RENDERING = true,\n} = import.meta;\n\nconst assets = new Assets({base: new URL('../', import.meta.url)}, 'style:styles/markout.css');\n\nconst stylesheet = assets['style:styles/markout.css'];\n\nconst styles = css`\n\t@import \"${stylesheet}\";\n\n\t:host {\n\t\tpadding: 1rem 2rem;\n\t\twhite-space: normal;\n\t}\n\n\t.hide {\n\t\topacity: 0;\n\t\tdisplay: block;\n\t}\n\n\t#wrapper {\n\t\twill-change: transition;\n\t\ttransition: 375ms / 125ms;\n\t}\n\n\t#content {\n\t\twill-change: transition;\n\t\ttransition: opacity 250ms;\n\t}\n\n\t#content tt.opener:first-child,\n\t#content tt.closer:last-child {\n\t\tdisplay: none !important;\n\t}\n\n\t#content .markout-content {\n\t\tborder: 0.075rem solid #9992;\n\t\tborder-radius: 3px;\n\t\tposition: relative;\n\t\tpadding: 1em 2em;\n\t\tpadding-inline-start: 2em;\n\t\tdisplay: block;\n\t\tcontain: style;\n\t}\n\n\t@media only screen and (max-width: 45rem) {\n\t\t:host {\n\t\t\tfont-size: 85%;\n\t\t}\n\t}\n`;\n\nexport class MarkoutContent extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\t/** @type {(typeof MarkoutContent)['declarativeStyling']} */\n\t\tthis.declarativeStyling = new.target.declarativeStyling;\n\n\t\tthis.name = `${this.tagName}-${++new.target.instance}`.toLocaleLowerCase();\n\n\t\t/** @type {HTMLSlotElement} */ const slot = this['::'];\n\t\tslot && slot.addEventListener('slotchange', event => this.isConnected && this.updateContent(slot), {passive: true});\n\t}\n\n\tconnectedCallback() {\n\t\t'renderedText' in this || this.renderContent(this.sourceText);\n\t\tsuper.connectedCallback();\n\t}\n\n\tasync updateContent(slot = this['::']) {\n\t\tconst assignedNodes = slot && slot.assignedNodes();\n\t\tif (assignedNodes.length) return this.renderContent(this.sourceText || '');\n\t}\n\n\tasync renderContent(sourceText) {\n\t\t/** @type {this & {'::': HTMLSlotElement, '::content': HTMLSlotElement, '#wrapper': HTMLDivElement, '#links': HTMLDivElement, sourceURL?: string | URL}} */\n\t\tconst {'::content': content, '::': slot = content, '#wrapper': wrapper, '#links': links, sourceURL} = this;\n\n\t\targuments.length || (sourceText = this.sourceText);\n\n\t\tif (sourceText === this.renderedText) return;\n\t\tif (!sourceText) return void (this.renderedText = content.textContent = '');\n\n\t\twrapper.style.transition = content.style.transition = '0s';\n\t\tcontent.hidden = wrapper.hidden = true;\n\t\tcontent.classList.add('hide');\n\t\twrapper.classList.add('hide');\n\t\tawait new Promise(resolve => requestAnimationFrame(resolve));\n\n\t\twrapper.style.transition = content.style.transition = '';\n\t\twrapper.classList.remove('hide');\n\t\twrapper.hidden = false;\n\n\t\tawait this.renderMarkdown(sourceText || this.sourceText, content);\n\n\t\tthis.renderedText = sourceText;\n\n\t\tconst timeout = new Promise(resolve => setTimeout(resolve, 150));\n\n\t\tif (links) {\n\t\t\tthis.innerHTML = '';\n\t\t\tlinks.innerHTML = `<!-- Links from markout content: ${sourceURL || '‹text›'} -->\\n`;\n\t\t\tconst stylesheets = [];\n\t\t\tconst baseURL = sourceURL || this.baseURI;\n\n\t\t\tfor (const link of content.querySelectorAll(`script[src],style[src],img[src],source[src],video[src]`)) {\n\t\t\t\tconst {nodeName, rel, baseURI, slot, parentElement, previousElementSibling} = link;\n\t\t\t\tif (slot && slot !== 'links') continue;\n\t\t\t\tconst type = `${link.type || ''}`.trim().toLowerCase();\n\t\t\t\tconst src = link.getAttribute('src');\n\t\t\t\tconst href = link.getAttribute('href');\n\t\t\t\tconst base = link.hasAttribute('base') ? baseURI : baseURL;\n\t\t\t\tconst url = new URL(src || href, base);\n\n\t\t\t\tlink.setAttribute('link-src', src);\n\t\t\t\tlink.setAttribute('link-base', base);\n\n\t\t\t\tswitch (nodeName) {\n\t\t\t\t\tcase 'SCRIPT':\n\t\t\t\t\t\tif (type === 'module') {\n\t\t\t\t\t\t\tdynamicImport(url);\n\t\t\t\t\t\t\tlink.remove();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (!type && parentElement && parentElement.nodeName === 'OUTPUT' && 'evaluateScript' in this) {\n\t\t\t\t\t\t\tlink.src = url;\n\t\t\t\t\t\t\tthis.evaluateScript(link);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 'STYLE':\n\t\t\t\t\t\tif ((src && !type) || type === 'text/css') {\n\t\t\t\t\t\t\tstylesheets.push(url);\n\t\t\t\t\t\t\tlink.remove();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 'IMG':\n\t\t\t\t\tcase 'VIDEO':\n\t\t\t\t\tcase 'SRC':\n\t\t\t\t\t\tlink.setAttribute('src', new URL(src, base));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// TODO: Ensure base attribute bahviour holds\n\t\t\t\t\t\t// link.slot = 'links';\n\t\t\t\t\t\tlink.setAttribute('base', base);\n\t\t\t\t\t\tlinks.appendChild(link);\n\t\t\t\t}\n\n\t\t\t\t!stylesheets.length ||\n\t\t\t\t\tlinks.appendChild(\n\t\t\t\t\t\tObject.assign(document.createElement('style'), {\n\t\t\t\t\t\t\ttextContent: stylesheets.map(url => `@import \"${url}\";`).join('\\n'),\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tawait Promise.race([stylesheet, timeout]);\n\t\tawait timeout;\n\n\t\tcontent.classList.remove('hide');\n\t\tcontent.hidden = false;\n\n\t\tif (this.rewriteAnchors) {\n\t\t\tconst anchors = content.querySelectorAll('a[href]');\n\t\t\tanchors && this.rewriteAnchors([...anchors]);\n\t\t}\n\t}\n\n\tasync renderMarkdown(sourceText = this.sourceText, slot = this['::content']) {\n\t\tconst {fragment} = this.createRenderedMarkdownFragment(sourceText);\n\n\t\tslot.innerHTML = '';\n\n\t\tDOM_MUTATIONS !== false &&\n\t\t\t((BREAKS_NORMALIZATION === true || DOM_MUTATIONS === true) && this.normalizeBreaksInFragment(fragment),\n\t\t\t(HEADINGS_NORMALIZATION === true || DOM_MUTATIONS === true) && this.normalizeHeadingsInFragment(fragment),\n\t\t\t(PARAGRAPHS_NORMALIZATION === true || DOM_MUTATIONS === true) && this.normalizeParagraphsInFragment(fragment),\n\t\t\t(DECLARATIVE_STYLING === true || DOM_MUTATIONS === true) && this.applyDeclarativeStylingInFragment(fragment));\n\n\t\tSOURCE_TEXT_RENDERING && (await this.renderSourceTextsInFragment(fragment));\n\n\t\tslot.appendChild(fragment);\n\t\tthis['(content)'] = {slot, sourceText, fragment, ...fragment};\n\t}\n\n\tcreateRenderedMarkdownFragment(sourceText) {\n\t\tlet fragment, normalizedText, tokens;\n\t\tconst {template = (this.template = document.createElement('template'))} = this;\n\t\ttemplate.innerHTML = renderer.render(\n\t\t\t(tokens = renderer.tokenize((normalizedText = renderer.normalize(sourceText)))),\n\t\t);\n\t\tfragment = template.content.cloneNode(true);\n\t\tfragment.fragment = fragment;\n\t\tfragment.sourceText = sourceText;\n\t\tfragment.normalizedText = normalizedText;\n\t\tfragment.tokens = tokens;\n\t\treturn fragment;\n\t}\n\n\tnormalizeBreaksInFragment(fragment) {\n\t\tfor (const br of fragment.querySelectorAll('br')) {\n\t\t\tconst {previousSibling, nextSibling, parentElement} = br;\n\t\t\t(!previousSibling ||\n\t\t\t\tpreviousSibling.nodeName !== 'SPAN' ||\n\t\t\t\t!nextSibling ||\n\t\t\t\tnextSibling.nodeName !== 'SPAN' ||\n\t\t\t\t(parentElement && !/^(?:CODE|PRE|LI)$/.test(parentElement.nodeName))) &&\n\t\t\t\tbr.remove();\n\t\t}\n\t}\n\n\tnormalizeHeadingsInFragment(fragment) {\n\t\tconst {MarkdownIdentity: Identity, MarkdownIdentityPrefixer: Prefixer, MarkdownIdentityJoiner: Joiner} = entities;\n\t\tconst {headings = (fragment.headings = {})} = fragment;\n\t\tfor (const heading of fragment.querySelectorAll(\n\t\t\t`h1:not([id]):not(:empty),h2:not([id]):not(:empty),h3:not([id]):not(:empty)`,\n\t\t)) {\n\t\t\tconst [, identity] = Identity.exec(heading.textContent) || '';\n\t\t\tif (!identity) continue;\n\t\t\tconst anchor = document.createElement('a');\n\t\t\tanchor.id = identity\n\t\t\t\t.replace(Prefixer, '')\n\t\t\t\t.replace(Joiner, '-')\n\t\t\t\t.toLowerCase();\n\t\t\theading.before(anchor);\n\t\t\tanchor.append(heading);\n\t\t\theadings[anchor.id] = {anchor, identity, heading};\n\t\t}\n\t}\n\n\tnormalizeParagraphsInFragment(fragment) {\n\t\tlet empty, span;\n\t\tif ((empty = fragment.querySelectorAll('p:empty')).length) {\n\t\t\t(span = document.createElement('span')).append(...empty);\n\t\t\t// console.log({empty, content: span.innerHTML});\n\t\t}\n\t}\n\n\tapplyDeclarativeStylingInFragment(fragment) {\n\t\tconst {declarativeStyling: {apply, selector} = {}} = this;\n\t\tif (typeof apply !== 'function' || typeof selector !== 'string' || selector === '') return;\n\t\tfor (const element of fragment.querySelectorAll(selector)) apply(element);\n\t}\n\n\trenderSourceTextsInFragment(fragment) {\n\t\tconst promises = [];\n\n\t\tfor (const element of fragment.querySelectorAll(`[${SourceTypeAttribute}]:not(:empty)`))\n\t\t\tpromises.push(\n\t\t\t\tthis.renderSourceText({\n\t\t\t\t\telement,\n\t\t\t\t\tsourceType: element.getAttribute(MarkupModeAttribute) || element.getAttribute(SourceTypeAttribute),\n\t\t\t\t\tsourceText: element.textContent,\n\t\t\t\t}),\n\t\t\t);\n\n\t\treturn promises.length ? Promise.all(promises) : Promise.resolve();\n\t}\n\n\t/**\n\t * @param {Partial<{element: HTMLElement, sourceType: string, sourceText: String}>} options\n\t * @returns {Promise<HTMLElement>}\n\t */\n\tasync renderSourceText(options) {\n\t\tlet element, fragment, sourceType, sourceText;\n\n\t\tif (\n\t\t\t!options ||\n\t\t\ttypeof options !== 'object' ||\n\t\t\t(({element, sourceType, sourceText, ...options} = options),\n\t\t\t!(element\n\t\t\t\t? !element.hasAttribute(MarkupSyntaxAttribute) &&\n\t\t\t\t  (sourceType ||\n\t\t\t\t\t\t(sourceType = element.getAttribute(MarkupModeAttribute) || element.getAttribute(SourceTypeAttribute)),\n\t\t\t\t  sourceText || (sourceText = element.textContent || ''))\n\t\t\t\t: sourceText))\n\t\t)\n\t\t\treturn void console.warn('Aborted: renderSourceText(%o => %o)', arguments[0], {element, sourceType, sourceText});\n\n\t\telement || ((element = document.createElement('pre')).className = 'markup code');\n\t\telement.removeAttribute(SourceTypeAttribute);\n\t\telement.setAttribute(MarkupSyntaxAttribute, sourceType);\n\t\tfragment = document.createDocumentFragment();\n\t\telement.textContent = '';\n\t\telement.sourceText = sourceText;\n\t\tawait markup.render(sourceText, {sourceType, fragment});\n\t\telement.appendChild(fragment);\n\n\t\treturn element;\n\t}\n\n\tasync evaluateScript(script) {\n\t\tconst {src} = script;\n\t\tconst sourceText = await (await fetch(src)).text();\n\t\tawait new Promise(requestAnimationFrame);\n\t\tdocument['--currentScript--'] = script;\n\t\t(1, eval)(`${sourceText}\\ndelete document['--currentScript--']`);\n\t}\n\n\tscrollToAnchor(anchor) {\n\t\t/** @type {HTMLAnchorElement} */\n\t\tlet target;\n\t\tconst {'::content': content} = this;\n\t\tif (anchor)\n\t\t\t(target = content.querySelector(`a[id=\"${anchor}\"]`))\n\t\t\t\t? target.scrollIntoView({behavior: 'smooth', block: 'start', inline: 'nearest'})\n\t\t\t\t: console.warn('scrollIntoView: %o', {anchor, target});\n\t}\n\n\t/// Properties\n\tget sourceText() {\n\t\tconst {childNodes, firstElementChild, renderedText} = this;\n\t\tif (renderedText || renderedText === '') return renderedText;\n\n\t\tif (firstElementChild && firstElementChild.nodeName === 'TEMPLATE') return firstElementChild.innerHTML.trim() || '';\n\n\t\tif (childNodes.length) {\n\t\t\tconst innerHTML = this.innerHTML;\n\t\t\tconst [, indent] = /^\\n?([ \\t*]*|)/.exec(innerHTML);\n\t\t\treturn indent ? innerHTML.replace(new RegExp(`^${indent}`, 'mg'), '') : innerHTML.trim() || '';\n\t\t}\n\t}\n\n\tset sourceText(sourceText) {\n\t\tthis.renderContent(sourceText);\n\t}\n}\n\ntry {\n\tMarkoutContent.shadowRoot = {mode: 'closed'};\n\n\tMarkoutContent.styles = styles;\n\n\tMarkoutContent.template = html`\n\t\t<slot inert hidden style=\"display:none;\"></slot>\n\t\t<slot id=\"styles\" name=\"styles\"></slot>\n\t\t<div id=\"links\"></div>\n\t\t<div id=\"wrapper\">\n\t\t\t<slot id=\"content\" class=\"markout-content\" name=\"content\"></slot>\n\t\t</div>\n\t`;\n\n\tMarkoutContent.declarativeStyling = (() => {\n\t\tconst declarativeStyling = {\n\t\t\t/** @type {{[name: string] : string}} */\n\t\t\tlookup: {},\n\t\t\tselector: '',\n\t\t\tapply: element => {\n\t\t\t\tconst style = element.style;\n\t\t\t\tconst {lookup, autoprefix} = declarativeStyling;\n\t\t\t\tif (autoprefix) {\n\t\t\t\t\tfor (const attribute of element.getAttributeNames())\n\t\t\t\t\t\tattribute in lookup &&\n\t\t\t\t\t\t\t((style[lookup[attribute]] = autoprefix(element.getAttribute(attribute))),\n\t\t\t\t\t\t\telement.removeAttribute(attribute));\n\t\t\t\t} else {\n\t\t\t\t\tfor (const attribute of element.getAttributeNames())\n\t\t\t\t\t\tattribute in lookup &&\n\t\t\t\t\t\t\t((style[lookup[attribute]] = element.getAttribute(attribute)), element.removeAttribute(attribute));\n\t\t\t\t}\n\t\t\t},\n\t\t\t/** @type {(value: string) => string} */\n\t\t\tautoprefix: undefined,\n\t\t};\n\n\t\tInitialization: {\n\t\t\tconst {getOwnPropertyNames, setPrototypeOf, getPrototypeOf, freeze, keys} = Object;\n\t\t\tconst {lookup} = declarativeStyling;\n\t\t\tconst Filter = /^(?!webkit[A-Z])(?!moz[A-Z])[a-zA-Z]{2,}$/;\n\t\t\tconst Boundary = /[a-z](?=[A-Z])/g;\n\t\t\tconst selectors = [];\n\t\t\tconst style = (MarkoutContent.template.firstElementChild || document.createElement('span')).style;\n\n\t\t\tfor (const property of new Set(\n\t\t\t\t[\n\t\t\t\t\t// Webkit/Blink\n\t\t\t\t\t...getOwnPropertyNames(style),\n\t\t\t\t\t// Firefox\n\t\t\t\t\t...getOwnPropertyNames(getPrototypeOf(style)),\n\t\t\t\t].filter(property => style[property] === '' && Filter.test(property)),\n\t\t\t)) {\n\t\t\t\tconst attribute = `${property.replace(Boundary, '$&-').toLowerCase()}:`;\n\t\t\t\tlookup[attribute] = property;\n\t\t\t\tselectors.push(`[${CSS.escape(attribute)}]`);\n\t\t\t}\n\n\t\t\tdeclarativeStyling.selector = selectors.join(',');\n\t\t\tfreeze(setPrototypeOf(declarativeStyling.lookup, null));\n\t\t\tfreeze(declarativeStyling.apply);\n\n\t\t\tPrefixes: {\n\t\t\t\tconst autoprefix = value => {\n\t\t\t\t\tconst prefixed = value.replace(autoprefix.matcher, autoprefix.replacer);\n\t\t\t\t\t// console.log(value, prefixed);\n\t\t\t\t\treturn prefixed;\n\t\t\t\t};\n\t\t\t\tautoprefix.mappings = {};\n\t\t\t\tautoprefix.prefix = CSS.supports('-moz-appearance', 'initial')\n\t\t\t\t\t? '-moz-'\n\t\t\t\t\t: CSS.supports('-webkit-appearance', 'initial')\n\t\t\t\t\t? '-webkit-'\n\t\t\t\t\t: '';\n\n\t\t\t\tif (autoprefix.prefix) {\n\t\t\t\t\tconst {mappings, prefix} = autoprefix;\n\t\t\t\t\tconst map = (property, value, mapping = `${prefix}${value}`) =>\n\t\t\t\t\t\tCSS.supports(property, value) || (mappings[value] = mapping);\n\n\t\t\t\t\tif (prefix === '-webkit-') {\n\t\t\t\t\t\tmap('width', 'fill-available');\n\t\t\t\t\t} else if (prefix === '-moz-') {\n\t\t\t\t\t\tmap('width', 'fill-available', '-moz-available');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst mapped = keys(mappings);\n\n\t\t\t\t\tif (mapped.length > 0) {\n\t\t\t\t\t\tautoprefix.matcher = new RegExp(String.raw`\\b-?(?:${mapped.join('|')})\\b`, 'gi');\n\t\t\t\t\t\tfreeze((autoprefix.replacer = value => mappings[value] || value));\n\t\t\t\t\t\tfreeze(autoprefix.mappings);\n\t\t\t\t\t\tfreeze((declarativeStyling.autoprefix = autoprefix));\n\t\t\t\t\t}\n\t\t\t\t\t// console.log(autoprefix, {...autoprefix});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfreeze(declarativeStyling);\n\t\t}\n\n\t\treturn declarativeStyling;\n\t})();\n\n\t// console.log({...MarkoutContent});\n\n\tcustomElements.define('markout-content', MarkoutContent);\n} catch (exception) {\n\tconsole.warn(exception);\n}\n\nconst START_OF_TEXT = '\\x02';\n// const CARRIAGE_RETURN = '\\x0D';\n// const LINE_FEED = '\\x0A';\n// const START_OF_CONTENT = START_OF_TEXT;\n","﻿// const RewritableURL = /^(\\.*(?=\\/)[^?#\\n]*\\/)(?:([^/?#\\n]+?)(?:(\\.[a-z]+)|)|)(\\?[^#]+|)(#.*|)$|/i;\nconst RewritableURL = /^(\\.*(?=\\/)[^?#\\n]*\\/|)(?:(?:([^/?#\\n]+?)(?:(\\.[a-z]+)|)|)|)(\\?[^#]+|)(#.*|)$|/i;\n\nconst {dir, dirxml, group, groupCollapsed, groupEnd, log} = console;\n\nexport const rewriteAnchors = (\n\tanchors,\n\t{sourceURL, baseURL, search, rootNode = document, debugging = import.meta['debug:hashout:anchor-rewrite']},\n) => {\n\tdebugging && groupCollapsed('%O ‹anchors› ', rootNode);\n\n\tfor (const anchor of anchors) {\n\t\tconst [matched, parent, name, extension = '.md', query = '', hash = ''] = RewritableURL.exec(\n\t\t\tanchor.getAttribute('href'),\n\t\t);\n\n\t\tdebugging && log({matched, parent, name, extension, query, hash});\n\n\t\tif (parent) {\n\t\t\tconst pathname = `${parent}${name ? `${name}${extension}` : ''}`;\n\n\t\t\tconst href =\n\t\t\t\tname && extension.toLowerCase() === '.md'\n\t\t\t\t\t? `${baseURL}${search}#${new URL(pathname, sourceURL).pathname}`\n\t\t\t\t\t: new URL(`${pathname}${query || ((!hash && search) || '')}${hash}`, sourceURL);\n\t\t\tanchor.href = href;\n\t\t} else if (hash) {\n\t\t\tanchor.href = `${location}${matched}`;\n\t\t} else {\n\t\t\tanchor.target || (anchor.target = '_blank');\n\t\t}\n\n\t\tdebugging && dirxml(anchor);\n\t}\n\n\tdebugging && groupEnd();\n};\n\n/// Debugging\nimport {debugging} from '/markout/lib/helpers.js';\n\ndebugging('hashout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\ttypeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bhashout|$)\\b/.test(location.search),\n\t'anchor-rewrite',\n]);\n","﻿import '../elements/markout-content.js';\nimport * as hashout from './hashout.js';\n\n(async () => {\n\tawait customElements.whenDefined('markout-content');\n\n\t/** @type {import('../elements/markout-content.js')['MarkoutContent']} */\n\tconst MarkoutContent = customElements.get('markout-content');\n\n\t/**\n\t * @typedef {HTMLAnchorElement} Anchor\n\t */\n\tconst ExtendedMarkoutContent = class extends MarkoutContent {\n\t\tasync load(src) {\n\t\t\tlet error;\n\t\t\targuments.length || (src = this.getAttribute('src'));\n\t\t\tif (!src) return;\n\t\t\tconst url = new URL(src, this.baseURI);\n\t\t\tconst response = await fetch(url);\n\t\t\tif (!response.ok) throw Error(`Failed to fetch ${url}`);\n\t\t\tconst text = await response.text();\n\t\t\tthis.sourceURL = url;\n\t\t\tthis.sourceText = text || '';\n\t\t}\n\n\t\t/**\n\t\t * @typedef {Array<Anchor>} Anchors\n\t\t * @param {Anchors} anchors\n\t\t */\n\t\trewriteAnchors(...anchors) {\n\t\t\tconst debugging = import.meta['debug:markout:anchor-rewrite'];\n\t\t\tconst rootNode = this;\n\t\t\tconst {sourceURL, baseURL = `/markout/`} = rootNode;\n\t\t\tconst search = location.search || '';\n\t\t\thashout.rewriteAnchors(anchors.flat(), {debugging, sourceURL, baseURL, search, rootNode});\n\t\t}\n\t};\n\n\tconst sections = document.body.querySelectorAll('markout-content[src]');\n\tif (sections) {\n\t\tconst {load, rewriteAnchors} = ExtendedMarkoutContent.prototype;\n\t\tfor (const section of sections) {\n\t\t\tsection.load || ((section.load = load), section.rewriteAnchors || (section.rewriteAnchors = rewriteAnchors)),\n\t\t\t\tsection.load().catch(exception => (section.sourceText = `<pre>${exception}</pre>`));\n\t\t}\n\t}\n})();\n\n/// Debugging\nimport {debugging} from '/markout/lib/helpers.js';\n\n// console.log(import.meta.url, /[?&]debug\\b/.test(import.meta.url));\n\ndebugging('markout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\t// /[?](?:.*[&]|)debug\\b/.test(import.meta.url) ||\n\t// (typeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bmarkout|$)\\b/.test(location.search)),\n\t/[?&]debug\\b/.test(import.meta.url) || /[?&]debug\\b/.test(location.search),\n\t'anchor-rewrite',\n]);\n"],"names":["entities","renderer.render","renderer.tokenize","renderer.normalize","markup.render","hashout.rewriteAnchors"],"mappings":"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"}
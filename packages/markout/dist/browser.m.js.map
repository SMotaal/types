{"version":3,"file":"browser.m.js","sources":["../../../components/lib/css.js","../../../components/lib/templates.js","../../../components/lib/properties.js","../../../components/lib/component.js","../../../components/lib/constructs.js","../../../components/lib/events.js","../../../components/lib/attributes.js","../../../quench/lib/common/async.js","../../../components/lib/globals.js","../../../quench/lib/common/globals.js","../../../quench/lib/common/helpers.js","../../../quench/lib/common/urls.js","../../../quench/lib/helpers.js","../../../quench/lib/assets.js","../../../quench/lib/components.js","../lib/entities.js","../lib/experimental/composable-list.js","../lib/experimental/block-normalizer.js","../../modules/segmenter/segmenter.js","../lib/experimental/markout-segmenter.js","../lib/experimental/segment-normalizer.js","../lib/normalizer.js","../lib/markout.js","../../../quench/elements/markout-content.js","../lib/hashout.js","../lib/browser.js"],"sourcesContent":["// @ts-check\n\nexport const debugging = {};\n\n/** @type {TaggedTemplate<string, any>} */\nexport const css = (options => {\n  const {raw} = String;\n\n  options = {...options};\n  const prefixed = [...options.prefixed];\n  const prefixes = {'[default]': undefined, ...options.prefixes};\n  prefixes['[default]'] = Object.freeze(prefixes['[default]'] || ['-webkit', '-moz']);\n  for (const prefix of prefixed) {\n    prefixes[prefix] || (prefixes[prefix] = prefixes['[default]']);\n  }\n  Object.freeze(prefixes);\n  const NOTHING = raw`-\\/\\*\\*\\/-`;\n  const COMMENT = raw`\\/\\*[^]*?\\*\\/`;\n  const SEGMENT = raw`\\s*\\b({{property}})\\b\\s*:\\s*([^]+?)\\s*;`\n    .replace('{{property}}', prefixed.join('|') || NOTHING)\n    .replace(/{{.*?}}/g, NOTHING);\n  const IGNORED = raw`.*?`;\n  const CSS = raw`${COMMENT}|(${SEGMENT})|${IGNORED}`;\n  const matcher = new RegExp(CSS, 'g');\n  const replacer = (match, segment, property, value) => {\n    let head, tail, segments, lhs, rhs;\n    if (segment) {\n      if (property) {\n        const valuePrefixes = prefixes[`${property}:${value}`];\n        const propertyPrefixes = prefixes[property];\n        if (\n          !(valuePrefixes && valuePrefixes.length) &&\n          !(propertyPrefixes && propertyPrefixes.length)\n        ) {\n          return match;\n        }\n        segment = segment.trim();\n        [head, tail] = match.split(segment);\n        segments = [match];\n        if (valuePrefixes && valuePrefixes.length) {\n          [lhs, rhs] = segment.split(/\\s*:\\s*/);\n          for (const prefix of valuePrefixes) {\n            segments.push(\n              `${head}${(propertyPrefixes && propertyPrefixes.includes(prefix) && `${prefix}-`) ||\n                ''}${lhs}: ${prefix}-${rhs}${tail}`,\n            );\n          }\n          // segments.push(match);\n        } else if (propertyPrefixes && propertyPrefixes.length) {\n          for (const prefix of propertyPrefixes) {\n            segments.push(`${head}${prefix}-${segment}${tail}`);\n          }\n        }\n        debugging.replacer &&\n          console.log(\n            '%o: %o',\n            property,\n            value,\n            // {property: propertyPrefixes, value: valuePrefixes},\n            ...segments,\n          );\n        return segments.join('');\n      }\n    }\n    return match;\n  };\n\n  const RAW_INDENT = /(?:\\\\t|[\\t ]+)*$/;\n  const RAW_TABS = /\\\\t/g;\n  const TAB = '\\t';\n  const STRING_INDENT = /^\\n?([\\t ]*)/;\n\n  /** @type {(rawString: string, value: string) => string} */\n  const reindent = (rawString, value) => {\n    const [, stringIndent] = (value && STRING_INDENT.exec(value)) || '';\n    if (stringIndent) {\n      const matcher =\n        reindent[stringIndent] ||\n        (reindent[stringIndent] = new RegExp(raw`^${stringIndent}`, 'mg'));\n      const [rawIndent] = RAW_INDENT.exec(rawString);\n      const replacer = rawIndent.replace(RAW_TABS, TAB);\n      const newValue = value.replace(matcher, replacer);\n      // console.log('%o', {\n      //   string: {rawString, rawIndent, matcher},\n      //   value: {value, stringIndent, replacer, newValue},\n      // });\n      return newValue;\n    }\n    return value;\n  };\n\n  const css = (strings, ...values) => {\n    const rawStrings = strings.raw;\n    for (let i = 0, n = rawStrings.length; n--; i++) {\n      const rawString = rawStrings[i];\n      const value = values[i];\n      if (value && typeof value === 'string') {\n        values[i] = reindent(rawString, value);\n      }\n    }\n    const source = Reflect.apply(raw, null, [strings, ...values]);\n    const style = source.replace(matcher, replacer);\n    return style;\n  };\n\n  Object.defineProperty(css, 'prefixes', {value: Object.freeze(prefixes)});\n  return css;\n})({\n  prefixes: {'backdrop-filter': ['-webkit'], position: [], 'position:sticky': ['-webkit']},\n  prefixed: ['user-select', 'backdrop-filter', 'position'],\n});\n\n/**\n * @template T, V\n * @typedef {import('./templates').TaggedTemplate<T, V>} TaggedTemplate\n */\n","// @ts-check\n\nexport {css} from './css.js';\n\n/** @typedef {{raw: TemplateStringsArray['raw']}} RawStrings */\n/** @typedef {TemplateStringsArray | RawStrings} TemplateStrings */\n\n/**\n * @template T\n * @template V\n * @typedef {(strings: TemplateStrings, ...values: V[]) => T} TaggedTemplate\n */\n\n/**\n * @template T\n * @typedef {TaggedTemplate<T, {toString(): string | void} | {} | void>} StringTaggedTemplate\n */\n\n/** @type {StringTaggedTemplate<string>} */\nexport const raw = String.raw;\n\n/**\n * @template T\n * @typedef {TaggedTemplate<T, {toString(): string | void} | DocumentFragment | HTMLElement | {} | void>} HTMLTaggedTemplate\n */\n\n/** @returns {HTMLTaggedTemplate<HTMLTemplateElement>} */\nexport const template = (template = document.createElement('template')) => (strings, ...values) => {\n  let index = 0;\n  for (const value of values) {\n    typeof value === 'string' ||\n      (values[index] = `${value &&\n        ('innerHTML' in value\n          ? value.innerHTML\n          : 'childNodes' in value && value.childNodes.length\n          ? ((template.innerHTML = ''),\n            template.content.appendChild(value.cloneNode(true)),\n            template.innerHTML)\n          : value)}`);\n    index++;\n  }\n  template.innerHTML = raw(strings, ...values);\n  return template;\n};\ntemplate.html = template;\n\nexport const html = (template => {\n  /** @type {HTMLTaggedTemplate<DocumentFragment>} */\n  return (...args) => {\n    const content = document.createDocumentFragment();\n    content.appendChild(Reflect.apply(template, null, args).content);\n    return content;\n  };\n})(template());\n\n// /**\n//  * @param {TemplateStringsArray | {raw: string[]}} strings\n//  * @param {*} values\n//  * @returns {string}\n//  */\n// export function css(strings, ...values) {\n//   const source = raw(strings, ...values);\n//   const style = source.replace(css.matcher, css.matcher.replacer);\n//   console.log({style});\n//   return style;\n// }\n\n// css.prefix = ['user-select'];\n","export const hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\nexport const {defineProperty, defineProperties, assign, getOwnPropertyDescriptor, getOwnPropertyNames} = Object;\n\nexport const initializeProperty = (\n  target,\n  property,\n  {value, get, set, writable = true, enumerable = true, configurable = true},\n) => (\n  !target ||\n    !property ||\n    hasOwnProperty(target, property) ||\n    defineProperty(\n      target,\n      property,\n      get || set ? {get, set, enumerable, configurable} : {value, writable, enumerable},\n    ),\n  target\n);\n\n/**\n * @template {{[name: K]: V}} T\n * @template {string|symbol} K\n * @template V\n * @param {T} target\n * @param {K} property\n * @param {V} value\n */\nexport const updateProperty = (target, property, value) => (\n  !target ||\n    !property ||\n    ((!hasOwnProperty(target, property) ||\n      (getOwnPropertyDescriptor(property) || '').configurable !== false) &&\n      defineProperty(target, property, {\n        get: () => value,\n        set: value => updateProperty(target, property, value),\n        configurable: true,\n      })),\n  target\n);\n","import {updateProperty} from './properties.js';\n\n/** @typedef {import('./attributes')['Attributes']} Attributes */\n\nexport class Component extends HTMLElement {\n  /** @type {Attributes<string> | undefined} */\n  static get attributes() {}\n\n  static set attributes(value) {\n    this === Component || updateProperty(this, 'attributes', value);\n  }\n\n  /** @type {string[]} */\n  static get observedAttributes() {\n    return this.attributes;\n  }\n\n  static set observedAttributes(value) {\n    this === Component || updateProperty(this, 'observedAttributes', value);\n  }\n\n  /** @type {{mode: 'open' | 'closed'} | undefined} */\n  static get shadowRoot() {}\n\n  static set shadowRoot(value) {\n    this === Component || updateProperty(this, 'shadowRoot', value);\n  }\n\n  /** @type {DocumentFragment | undefined} */\n  static get template() {}\n\n  static set template(value) {\n    this === Component || updateProperty(this, 'template', value);\n  }\n\n  /** @type {DocumentFragment | undefined} */\n  static get styles() {}\n\n  static set styles(value) {\n    this === Component || updateProperty(this, 'styles', value);\n  }\n\n  constructor() {\n    /** @type {this} */\n    const host = super();\n\n    const constructor = new.target;\n    const {\n      prototype,\n      attributes,\n      template,\n      styles,\n      shadowRoot,\n      initializeRoot = Component.initializeRoot,\n    } = constructor;\n\n    const root =\n      /** @type {ShadowRoot} */\n      (shadowRoot && (shadowRoot === 'closed' && host.attachShadow({mode: 'closed'}))) ||\n      ((shadowRoot === true || shadowRoot === 'open') && host.attachShadow({mode: 'open'})) ||\n      (typeof shadowRoot === 'object' && 'mode' in shadowRoot && host.attachShadow(shadowRoot)) ||\n      host;\n\n    root === host && (host.style.visibility = 'hidden');\n\n    /** @type {HTMLStyleElement} */\n    let style;\n    /** @type {DocumentFragment} */\n    let fragment;\n\n    if (attributes && attributes.length) {\n      for (const attribute of attributes) {\n        prototype.hasOwnProperty(attribute) ||\n          Object.defineProperty(this, attribute, {\n            get() {\n              return this.hasAttribute(attribute)\n                ? this.getAttribute(attribute)\n                : attributes[attribute];\n            },\n            set(value) {\n              value === null || value === undefined\n                ? this.removeAttribute(attribute)\n                : value === this.getAttribute(attribute) || this.setAttribute(attribute, value);\n            },\n          });\n      }\n      this.attributes.defaultAttributes = attributes;\n      this.attributes.isInitialized = false;\n    }\n\n    if (styles) {\n      const node = (style = document.createElement('style'));\n      node.loaded = new Promise(resolve => {\n        const handler = event => {\n          node.removeEventListener('load', handler);\n          node.removeEventListener('error', handler);\n          node.removeEventListener('abort', handler);\n          resolve({node, event});\n        };\n        node.addEventListener('load', handler, {capture: true, passive: false, once: true});\n        node.addEventListener('error', handler, {capture: true, passive: false, once: true});\n        node.addEventListener('abort', handler, {capture: true, passive: false, once: true});\n      });\n      style.textContent = styles;\n    }\n\n    if (template) {\n      /** @type {DocumentFragment} */\n      fragment = (template.content || template).cloneNode(true);\n      for (const element of fragment.querySelectorAll('[id]')) {\n        this[`#${element.id}`] = element;\n      }\n      for (const element of fragment.querySelectorAll('slot')) {\n        const name = `::${element.name || ''}`;\n        name in this || (this[name] = element);\n      }\n    }\n\n    root === host\n      ? setTimeout(() => (fragment = style = void initializeRoot(host, fragment, style, root)), 0)\n      : (fragment = style = void initializeRoot(host, fragment, style, root));\n  }\n\n  connectedCallback() {\n    this.attributes.isInitialized === false && this.initializeAttributes();\n  }\n\n  attributeChangedCallback(attributeName, previousValue, nextValue) {\n    previousValue === nextValue ||\n      previousValue == nextValue ||\n      (typeof this.updateAttribute === 'function'\n        ? this.updateAttribute(attributeName, nextValue, previousValue)\n        : attributeName in this && (this[attributeName] = nextValue));\n  }\n\n  initializeAttributes() {\n    const {defaultAttributes, isInitialized} = this.attributes;\n    if (!isInitialized && defaultAttributes) {\n      this.attributes.isInitialized = true;\n      for (const attribute in defaultAttributes) {\n        this.updateAttribute(attribute, this[attribute]);\n      }\n    }\n  }\n\n  trace(detail, context = (detail && detail.target) || this, ...args) {\n    const span = typeof context === 'string' ? '%s' : '%O';\n    detail &&\n      (detail.preventDefault\n        ? console.log(`${span}‹%s› %O`, context, detail.type, detail, ...args)\n        : console.trace(`${span} %O`, context, detail, ...args));\n  }\n\n  static async initializeRoot(host, fragment, style, root) {\n    style && root.prepend(style);\n    fragment && (style && style.loaded && (await style.loaded), root.prepend(fragment));\n    root === host && (host.style.visibility = '');\n  }\n}\n","/// PRESETS\n/**\n * @extends {ReadonlyArray<string>}\n */\nexport class Presets extends Array {\n  matching(object) {\n    if (Object.values(this).includes(object)) return object;\n    const key = Presets.keyFor(object);\n    if (key) return Presets[key];\n  }\n}\n\n/**\n * @type {{<T extends {}>(type: string, presets: T): Readonly<T> & ReadonlyArray<keyof T & string>}}\n */\nPresets.define = (definitions, type) => {\n  const names = Object.getOwnPropertyNames(definitions);\n  const presets = new Presets();\n  for (const name of names) {\n    const object = definitions[name];\n    const preset = Presets.preset(object);\n    if (!preset) continue;\n    const key = Presets.key(preset);\n    presets[key] = presets[name] = Object.freeze(\n      Object.defineProperty(\n        Object.defineProperties(\n          Reflect.construct(String, [key], Object),\n          Object.getOwnPropertyDescriptors(preset),\n        ),\n        {\n          [Symbol.toStringTag]: {value: `${type}.${name}`},\n        },\n      ),\n    );\n    presets.push(name);\n  }\n  return Object.freeze(Object.defineProperty(presets, 'Symbol.toStringTag', {value: `${type}`}));\n};\n\nPresets.mappings = new WeakMap();\n\nPresets.keyFor = preset => {\n  if (!preset || typeof preset !== 'object' || [Symbol.iterator] in preset) return;\n\n  let key = Presets.mappings.get(preset);\n\n  if (key) return key;\n\n  try {\n    return Presets.key(Presets.preset(preset), null, 0);\n  } catch (exception) {}\n};\n\nPresets.key = preset => JSON.stringify(preset, null, 0);\n\nPresets.preset = object => {\n  if (!object || typeof object !== 'object' || [Symbol.iterator] in object) return;\n  const preset = {};\n  for (const key of Object.getOwnPropertyNames(object).sort()) {\n    object[key] === undefined || (preset[key] = object[key]);\n  }\n  return preset;\n};\n","/// <reference path=\"./types.d.ts\" />\n\nimport {Presets} from './constructs.js';\n\n/// EventListener\n\n/**\n * @template {EventTarget} T\n * @template {string} U\n * @template {EventListenerOptions} V\n * @extends {Function}\n */\nexport class EventListener {\n  remove() {\n    /** @type {{target: T, type: U, options: V}} */\n    const {type, target, options} = this;\n    return target.removeEventListener(type, this, options);\n  }\n}\n\nEventListener.Options = Presets.define('EventListener.Options', {\n  None: {},\n  Active: {capture: false, once: false, passive: true},\n  Capture: {capture: true, once: false, passive: false},\n  Passive: {capture: false, once: false, passive: true},\n  CapturePassive: {capture: true, once: false, passive: true},\n  Once: {capture: false, once: true, passive: false},\n  CaptureOnce: {capture: true, once: true, passive: false},\n  OncePassive: {capture: false, once: true, passive: true},\n  CaptureOncePassive: {capture: true, once: true, passive: true},\n});\n\nEventListener.Unknown = EventListener.Options.None;\nEventListener.Active = EventListener.Options.Active;\nEventListener.Capture = EventListener.Options.Capture;\nEventListener.Passive = EventListener.Options.Passive;\nEventListener.CapturePassive = EventListener.Options.CapturePassive;\nEventListener.Once = EventListener.Options.Once;\nEventListener.CaptureOnce = EventListener.Options.CaptureOnce;\nEventListener.OncePassive = EventListener.Options.OncePassive;\nEventListener.CaptureOncePassive = EventListener.Options.CaptureOncePassive;\n\n/** @type {<T extends EventTarget, U extends string, V extends EventListenerOptions = {}>(target: T, type: U, handler: Function, options?: V) => EventListener<T, U, V>} */\nEventListener.create = (target, ...args) => {\n  let attached, options;\n  try {\n    const handler = args[1]; // .bind(target);\n    (handler.target = target).addEventListener(\n      (handler.type = args[0]),\n      handler,\n      (options = args[2]) || EventListener.Unknown,\n    );\n    return (attached = handler);\n  } finally {\n    if (attached) {\n      attached.options =\n        (options && EventListener.Options.matching(options)) || EventListener.Options.None;\n      Object.setPrototypeOf(attached, EventListener.prototype);\n    }\n    // attached && (\n    //   attached.remove = () =>\n    // )\n  }\n};\n","/**\n * @template T\n * @param {T} value\n * @returns {attribute.toggle<T>}\n */\nexport const Toggle = (matcher => value =>\n  ((value !== null && value !== undefined && typeof value !== 'symbol') || undefined) &&\n  (value === true ||\n    value == true ||\n    ((value !== '' || '') &&\n      ((value !== false && value != false) || false) &&\n      (value = matcher.exec(value) || undefined) &&\n      (value[1] ? true : value[2] ? false : undefined))))(/\\b(?:(true|on|yes)|(false|off|no))\\b/i);\n\nimport {assign, defineProperties, getOwnPropertyNames} from './properties.js';\n\n/**\n * @template {string} K\n * @extends {Array<K>}\n */\nexport class Attributes extends Array {\n  /**\n   * @param {{[index: number]:K} | {[name: K]}} attributes\n   */\n  constructor(attributes) {\n    const names =\n      (attributes &&\n        ((Symbol.iterator in attributes && attributes) || getOwnPropertyNames(attributes))) ||\n      '';\n    super(...names);\n    !attributes || names === attributes || assign(this, attributes);\n  }\n\n  *entries() {\n    for (const key of super[Symbol.iterator]()) {\n      yield [key, this[key]];\n    }\n  }\n\n  /**\n   * @template {string} K\n   * @template {{[name: K]}} T\n   * @param {...T} definitions\n   * @returns {Attributes<K> | T}\n   */\n  static from(...definitions) {\n    const attributes = {};\n\n    for (const object of definitions) {\n      for (const name of Symbol.iterator in object ? object : getOwnPropertyNames(object)) {\n        typeof name !== 'string' ||\n          (name in attributes\n            ? // Assign to undefined default\n              attributes[name] === undefined || (attributes[name] = object[name])\n            : // Add name to the set of names and initialize default\n              (attributes[name] = object[name]));\n      }\n    }\n\n    // return assign(new this(...names), defaults);\n    return new this(attributes);\n  }\n}\n\ndefineProperties(Attributes.prototype, {\n  [Symbol.toStringTag]: {value: 'Attributes'},\n  [Symbol.isConcatSpreadable]: {value: false},\n});\n\n/**\n * @typedef {*} attribute.value\n * @typedef {''} attribute.empty\n * @typedef {undefined | null | symbol} attribute.undefined\n * @typedef {true | 1 | 'true' | 'on' | 'yes'} attribute.true\n * @typedef {false | 0 | 'false' | 'off' | 'no'} attribute.false\n */\n\n/**\n * @template T\n * @typedef {T extends attribute.true ? true : T extends attribute.false ? false : T extends attribute.empty ? '' : undefined} attribute.toggle\n */\n","﻿//@ts-check\n/// <reference path=\"./types.d.ts\" />\n\n/**\n * @template T, U\n * @param {iterable<T>} iterable\n * @param {(value: T) => U | Promise<U>} ƒ\n * @param {U | T} [value]\n */\nexport async function each(iterable, ƒ, value) {\n\t/** @type {iterates<T>} */\n\tconst iterator =\n\t\t(iterable && ('next' in iterable && typeof iterable.next === 'function' && iterable)) ||\n\t\t((Symbol.asyncIterator in iterable && iterable[Symbol.asyncIterator]()) ||\n\t\t\t(Symbol.iterator in iterable && iterable[Symbol.iterator]()));\n\ttry {\n\t\tlet result, done;\n\t\tlet received = arguments.length > 2;\n\t\tlet value = arguments[2];\n\t\twhile (!done && (result = received ? iterator.next(value) : iterator.next())) {\n\t\t\t({done, value} = typeof result.then !== 'function' ? await result : result);\n\t\t\treceived =\n\t\t\t\tundefined !==\n\t\t\t\t((value = ƒ(value && 'then' in value && typeof value.then === 'function' ? await value : value)) &&\n\t\t\t\t'then' in value &&\n\t\t\t\ttypeof value.then === 'function'\n\t\t\t\t\t? (value = await value)\n\t\t\t\t\t: value);\n\t\t}\n\t} finally {\n\t\titerator &&\n\t\t\titerable !== iterator &&\n\t\t\t'return' in iterator &&\n\t\t\ttypeof iterator.return === 'function' &&\n\t\t\titerator.return();\n\t}\n}\n\n/**\n * @template T\n * @typedef {import('./types').iterable<T>} iterable<T>\n */\n\n/**\n * @template T\n * @typedef {import('./types').iterates<T>} iterates<T>\n */\n","/// <reference path=\"./types.d.ts\" />\n/// <reference types=\"node\" />\n\n// @ts-check\n\nexport const globals = {};\n\nconst currentGlobal = (globals.global =\n  typeof global === 'object' && global && global.global === global && global);\nexport {currentGlobal as global};\n\nconst currentProcess = (globals.process =\n  currentGlobal && typeof currentGlobal.process === 'object' && currentGlobal.process);\nexport {currentProcess as process};\n\nconst currentSelf = (globals.self = typeof self === 'object' && self && self.self === self && self);\nexport {currentSelf as self};\n\nconst currentWindow = (globals.window =\n  typeof window === 'object' && window.window === window && window);\nexport {currentWindow as window};\n\nconst currentDocument = (globals.document = typeof document === 'object' && document);\nexport {currentDocument as document};\n\n/** @type {FunctionConstructor} */\n// @ts-ignore\nglobals.Function = function() {}.constructor;\n/** @type {ObjectConstructor} */\n// @ts-ignore\nglobals.Object = {}.constructor;\n\n/// Functions\n\nexport const bind = globals.Function.bind.bind(globals.Function.call);\nexport const call = globals.Function.call.bind(globals.Function.call);\n\n/// Objects\n/** @type {ObjectConstructor} */\n// @ts-ignore\nexport const {\n  assign,\n  defineProperty,\n  defineProperties,\n  create,\n  freeze,\n  seal,\n  preventExtensions,\n  getOwnPropertyDescriptor,\n  getOwnPropertyDescriptors,\n  getOwnPropertyNames,\n  getOwnPropertySymbols,\n  getPrototypeOf,\n  setPrototypeOf,\n  entries,\n  keys,\n  values,\n  // prototype: {isPrototypeOf: ObjectIsPrototypeOf, hasOwnProperty: ObjectHasOwnProperty},\n} = globals.Object.constructor;\n\n/**\n * @type {<T>(prototype: T, object) => object is T}\n */\nexport const isPrototypeOf = globals.Function.call.bind(globals.Object.prototype.isPrototypeOf);\n\n/**\n * @type {<U extends string|symbol|number>(object: {}, property: U) => boolean}\n */\nexport const hasOwn = globals.Function.call.bind(globals.Object.prototype.hasOwnProperty);\n\nexport default globals;\n","﻿/** @package {components} */\nexport * from '../../../components/lib/globals.js';\n","﻿export const noop = () => {};\nexport const resolvedPromise = Promise.resolve();\n","﻿import {resolvedPromise} from './helpers.js';\nimport {document} from './globals.js';\n\nexport const resolve = (specifier, referrer) => {\n\ttry {\n\t\treturn `${referrer === undefined ? new URL(specifier) : new URL(specifier, referrer)}`;\n\t} catch (exception) {}\n};\n\n// import {log, warn} from './debug.js';\n\nexport const preloading = (!document && {}) || document.links['[[preload]]'] || (document.links['[[preload]]'] = {});\n\nexport const preload = (src => {\n\tconst preload = (href, as) => {\n\t\tlet promise = preloading[href];\n\t\tif (!promise) {\n\t\t\tconst {types, extensions, base} = preload;\n\t\t\ttry {\n\t\t\t\tconst url = new URL(href, preload.base);\n\t\t\t\tif (!as) {\n\t\t\t\t\tlet [, extension] = /\\.([^/.]+)$|/.exec(url.pathname.toLowerCase());\n\t\t\t\t\tif (!(extension in extensions))\n\t\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\t\tnew TypeError(\n\t\t\t\t\t\t\t\t`Cannot preload \"${url}\"${\n\t\t\t\t\t\t\t\t\textension ? ` - extension $\"{extension}\" is not supported` : ' - cannot infer type'\n\t\t\t\t\t\t\t\t}.`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\tas = preload.extensions[as];\n\t\t\t\t} else if (!types[(as = `${as}`.toLowerCase())]) {\n\t\t\t\t\treturn Promise.reject(new TypeError(`Cannot preload \"${url}\" - type \"${as}\" is not supported.`));\n\t\t\t\t}\n\t\t\t\tpromise = preloading[url] || (promise = preloading[href] = preloading[url] = createPreloadPromise({href, as}));\n\t\t\t} catch (exception) {\n\t\t\t\treturn Promise.reject(exception);\n\t\t\t}\n\t\t}\n\t\treturn promise;\n\t};\n\n\tconst createPreloadPromise = ({\n\t\thref,\n\t\turl = href,\n\t\tas,\n\t\tdocument: ownerDocument = document,\n\t\tinitiator = import.meta.url,\n\t}) => {\n\t\tif (!ownerDocument) {\n\t\t\tdocument ||\n\t\t\t\tpreload.promise.warned ||\n\t\t\t\t(preload.promise.warned = !console.warn('[preload]: Preload is not supported.'));\n\t\t\treturn resolvedPromise;\n\t\t}\n\t\tconst {head = document.head} = ownerDocument;\n\n\t\tconst type = types[as] || types[`${as}`.toLowerCase()] || as;\n\n\t\tconst preloads = head.querySelectorAll(`link[rel=preload][as=\"${type}\"]`);\n\n\t\tif (preloads && preloads.length) {\n\t\t\turl.pathname && (url.pathname = url.pathname.replace(/\\/+/g, '/'));\n\t\t\tconst href = `${url}`;\n\t\t\tfor (const link of preloads) {\n\t\t\t\tif (link.href === href) return resolved;\n\t\t\t\t// console.log({href, url, 'link.href': link.href});\n\t\t\t}\n\t\t}\n\n\t\tlet link = ownerDocument.createElement('link');\n\t\tconst promise = Object.defineProperties(\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tlet done = event =>\n\t\t\t\t\tvoid (link.removeEventListener('abort', done),\n\t\t\t\t\tlink.removeEventListener('error', done),\n\t\t\t\t\tlink.removeEventListener('load', done),\n\t\t\t\t\t(done = resolve()),\n\t\t\t\t\t(promise.loaded = event.type === 'load') ||\n\t\t\t\t\t\t((event.error && (promise.error = event.error)) || (promise[event.type] = true)));\n\t\t\t\tlink.addEventListener('abort', done, {once: true});\n\t\t\t\tlink.addEventListener('error', done, {once: true});\n\t\t\t\tlink.addEventListener('load', done, {once: true});\n\t\t\t}).finally(() => {\n\t\t\t\tObject.defineProperty(promise, 'link', {value: (link = link.remove())});\n\t\t\t}),\n\t\t\t{link: {value: link, configurable: true}, initiator: {value: initiator}},\n\t\t);\n\n\t\tlink.href = url;\n\t\tlink.rel = 'preload';\n\t\tlink.as = type;\n\t\t// as && (link.as = types[as] || types[`${as}`.toLowerCase()] || as);\n\t\thead.appendChild(link);\n\t\treturn promise;\n\t};\n\n\tconst base = (preload.base = `${(typeof location === 'object' && typeof location.href === 'string' && location) ||\n\t\tnew URL(src.replace(/\\/lib\\/.*?$/i, ''))}`);\n\tconst types = (preload.types = {});\n\tconst extensions = (preload.extensions = {});\n\n\ttypes.fetch = 'fetch';\n\textensions.js = types.script = types.module = 'script';\n\textensions.css = types.stylesheet = types.style = 'style';\n\textensions.html = types.document = 'document';\n\n\treturn preload;\n})(import.meta.url);\n","﻿/// <reference path=\"./common/global.d.ts\" />\n\nexport * from './common/async.js';\n// export * from './common/debug.js';\nexport * from './common/globals.js';\nexport * from './common/helpers.js';\nexport * from './common/urls.js';\n// export {dynamicImport} from '../../pholio/lib/import.js';\n","﻿import {window, document, process, noop, resolve, preload} from './helpers.js';\n\nconst root =\n\t(document && document.baseURI && new URL('./', document.baseURI)) ||\n\t(window && window.location && new URL('./', window.location)) ||\n\t(process && process.cwd && new URL(`file://${process.cwd()}`)) ||\n\tnew URL('../', import.meta.url);\n\nconst BASE = '[[base]]';\nconst SCRIPTS = '[[scripts]]';\nconst STYLES = '[[styles]]';\nconst PRELOAD = '[[preload]]';\nconst types = {\n\tscript: SCRIPTS,\n\tstyle: STYLES,\n};\n\nexport class Asset extends URL {\n\tconstructor(href, type) {\n\t\tsuper(href);\n\t\tthis.type = type;\n\t\tObject.defineProperties(this, Object.getOwnPropertyDescriptors(Object.freeze({...this})));\n\t}\n\n\tget [PRELOAD]() {\n\t\tconst value = preload(this, this.type);\n\t\tObject.defineProperty(this, PRELOAD, {value});\n\t\treturn value;\n\t}\n\n\tthen(ƒ) {\n\t\treturn this[PRELOAD].then(ƒ);\n\t}\n\n\tcatch(ƒ) {\n\t\treturn this[PRELOAD].catch(ƒ);\n\t}\n\n\tfinally(ƒ) {\n\t\treturn this[PRELOAD].finally(ƒ);\n\t}\n}\n\nexport class Assets {\n\t/** @typedef {{base: string}} Options */\n\t/** @typedef {string} specifier */\n\t/** @param {Options} [options] */\n\t/** @param {... specifier} [specifiers] */\n\tconstructor(options, ...specifiers) {\n\t\tconst assets = {script: {}, style: {}};\n\n\t\tconst {base = `${root}`} = {\n\t\t\t...(((!arguments.length || typeof options === 'object') && options) ||\n\t\t\t\t(options = void ([...specifiers] = arguments))),\n\t\t};\n\n\t\tconst descriptors = {\n\t\t\t[BASE]: {value: base},\n\n\t\t\t[SCRIPTS]: {\n\t\t\t\tget: () => {\n\t\t\t\t\tconst promise = Promise.all(Object.values(assets.script)).then(noop);\n\t\t\t\t\tObject.defineProperty(this, SCRIPTS, {value: promise});\n\t\t\t\t\treturn promise;\n\t\t\t\t},\n\t\t\t\tconfigurable: true,\n\t\t\t},\n\n\t\t\t[STYLES]: {\n\t\t\t\tget: () => {\n\t\t\t\t\tconst promise = Promise.all(Object.values(assets.style)).then(noop);\n\t\t\t\t\tObject.defineProperty(this, STYLES, {value: promise});\n\t\t\t\t\treturn promise;\n\t\t\t\t},\n\t\t\t\tconfigurable: true,\n\t\t\t},\n\t\t};\n\n\t\tfor (const specifier of specifiers) {\n\t\t\tlet [, type, href] = /^(?:(style|script|fetch):|)(.*)$/.exec(specifier);\n\t\t\t// const preloading = as && preload(specifier, as);\n\n\t\t\tif (!type || !(type in assets || (type = `${type}`.toLowerCase()) in assets)) {\n\t\t\t\tconsole.log({specifier, type, href});\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst url = resolve(href, base);\n\t\t\turl.startsWith(base) && (href = url.replace(base, ''));\n\t\t\tconst id = `${type}:${href}`;\n\n\t\t\tObject.defineProperty(assets[type], href, (descriptors[id] = {value: new Asset(url, type), enumerable: true}));\n\n\t\t\tid !== specifier && (descriptors[specifier] = {get: () => this[id]});\n\t\t}\n\n\t\tObject.defineProperties(this, descriptors);\n\t}\n\n\tresolve(specifier, referrer = this[BASE]) {\n\t\treturn resolve(specifier, referrer);\n\t}\n\n\tstatic resolve(specifier, referrer = root) {\n\t\treturn resolve(specifier, referrer);\n\t}\n}\n","﻿/** @package components */\nexport {html, raw} from '../../components/lib/templates.js';\n/** @package components */\nexport {css} from '../../components/lib/css.js';\n/** @package components */\nexport {Component} from '../../components/lib/component.js';\n/** @package components */\nexport {EventListener} from '../../components/lib/events.js';\n/** @package components */\nexport {Attributes, Toggle} from '../../components/lib/attributes.js';\nexport {Assets} from './assets.js';\n/** @package components */\n// export {dynamicImport} from '../../pholio/lib/import.js';\n","﻿import {entities} from '../../../markup/dist/tokenizer.browser.js';\n\nexport const {\n\tUnicodeIdentifier,\n\tMarkdownIdentityPrefixer,\n\tMarkdownIdentityJoiner,\n\tMarkdownIdentityWord,\n\tMarkdownIdentity,\n} = (({\n\traw = String.raw,\n\tIdentifierStart,\n\tIdentifierPart,\n\tUnicodeIdentifierStart = IdentifierStart.slice(2),\n\tUnicodeIdentifierPart = IdentifierPart.slice(2),\n\tUnicodeIdentifier = raw`[${UnicodeIdentifierStart}][${UnicodeIdentifierPart}]*`,\n\tMarkdownWordPrefixes = raw`$@`,\n\tMarkdownWordPrefix = raw`[${MarkdownWordPrefixes}]?`,\n\tMarkdownWord = raw`${MarkdownWordPrefix}${UnicodeIdentifier}`,\n\tMarkdownWordJoiners = raw` \\\\\\/:_\\-\\xA0\\u2000-\\u200B\\u202F\\u2060`,\n\tMarkdownWordJoiner = raw`[${MarkdownWordJoiners}]+`,\n\tMarkdownIdentity = raw`(?:\\s|\\n|^)(${MarkdownWord}(?:${MarkdownWordJoiner}${MarkdownWord})*(?=\\b[\\s\\n]|$))`,\n}) => ({\n\tUnicodeIdentifier: new RegExp(UnicodeIdentifier, 'u'),\n\tMarkdownIdentityPrefixer: new RegExp(raw`^[${MarkdownWordPrefixes}]?`, 'u'),\n\tMarkdownIdentityJoiner: new RegExp(raw`[${MarkdownWordJoiners}]+`, 'ug'),\n\tMarkdownIdentityWord: new RegExp(MarkdownWord, 'u'),\n\tMarkdownIdentity: new RegExp(MarkdownIdentity, 'u'),\n\t// MarkdownIdentitySeparators: new RegExp(raw`[${MarkdownWordPrefixes}${MarkdownWordJoiners}]+`, 'ug')\n}))(entities.es);\n","﻿export class ComposableList extends Array {\n\ttoString(inset = this.inset || '', type = this.type || 'ul', style = this.style, start = this.start) {\n\t\tconst attributes = `${\n\t\t\t// TODO: Explore using type attribute instead\n\t\t\t(style && `style=\"list-style: ${style}\"`) || ''\n\t\t} ${\n\t\t\t// TODO: Check if guard against invalid start is needed\n\t\t\t(start && `start=\"${start}\"`) || ''\n\t\t}`.trim();\n\n\t\tconst rows = [`${inset}<${type}${(attributes && ` ${attributes}`) || ''}>`];\n\t\tfor (const item of this) {\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tif (item instanceof ComposableList) {\n\t\t\t\t\tconst last = rows.length - 1;\n\t\t\t\t\tconst row = rows[last];\n\t\t\t\t\tlast > 0\n\t\t\t\t\t\t? (rows[rows.length - 1] = `${row.slice(0, -5)}\\n${item.toString(`${inset}\\t\\t`)}\\n${inset}\\t</li>`)\n\t\t\t\t\t\t: rows.push(`${inset}\\t<li>\\n${item.toString(`${inset}\\t\\t`)}\\n${inset}\\t</li>`);\n\t\t\t\t} else {\n\t\t\t\t\tconst insetText = `${item}`;\n\t\t\t\t\tlet text = insetText;\n\t\t\t\t\tfor (const character of inset) {\n\t\t\t\t\t\tif (!text.startsWith(character)) break;\n\t\t\t\t\t\ttext = text.slice(1);\n\t\t\t\t\t}\n\t\t\t\t\trows.push(text);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trows.push(`${inset}\\t<li>${`${item}`.trim()}</li>`);\n\t\t\t}\n\t\t}\n\t\trows.push(`${inset}</${type}>`);\n\t\treturn `\\n${rows.join('\\n')}\\n`;\n\t}\n}\n","﻿import {encodeEntities} from '../markup.js';\nimport {ComposableList} from './composable-list.js';\n\nconst {\n\t/** Attempts to overcome **__** */\n\n\t'markout-render-merged-marking': MERGED_MARKING = true,\n} = import.meta;\n\nconst MATCHES = Symbol('matches');\nconst ALIASES = 'aliases';\nconst BLOCKS = 'blocks';\n\nconst NormalizableBlocks = /(?:^|\\n)([> \\t]*(?:\\`\\`\\`|\\~\\~\\~))[^]+?(?:(?:\\n\\1[ \\t]*)+\\n?|$)|([^]+?(?:(?=\\n[> \\t]*(?:\\`\\`\\`|\\~\\~\\~))|$))/g;\nconst NormalizableParagraphs = /^((?:[ \\t]*\\n([> \\t]*))+)((?:(?!(?:\\d+\\. |[a-z]\\. |[ivx]+\\. |[-*] ))[^\\-#>|~\\n].*(?:\\n[> \\t]*$)+|$)+)/gm;\nconst RewritableParagraphs = /^([ \\t]*[^\\-\\*#>\\n].*?)(\\b.*[^:\\n\\s>]+|\\b)[ \\t]*\\n[ \\t>]*(?=(\\b|\\[.*?\\][^:\\n]?|[^#`\\[\\n]))/gm;\nconst NormalizableLists = /(?=(\\n[> \\t]*)(?:[-*] |[1-9]+\\d*\\. |[a-z]\\. |[ivx]+\\. ))((?:\\1(?:[-*] |[1-9]+\\d*\\. |[a-z]\\. |[ivx]+\\. |   ?)+[^\\n]+(?:\\n[> \\t]*)*(?=\\1|$))+)/g;\nconst NormalizableListItem = /^([> \\t]*)([-*] |[1-9]+\\d*\\. |[a-z]\\. |[ivx]+\\. |)([^\\n]+(?:\\n\\1(?:   ?|\\t ?)(?![ \\t]|[-*] |\\d+\\. |[a-z]\\. |[ivx]+\\. ).*)*)$/gm;\nconst NormalizableReferences = /\\!?\\[(\\S.+?\\S)\\](?:\\((\\S[^\\n()\\[\\]]*?\\S)\\)|\\[(\\S[^\\n()\\[\\]]*\\S)\\])/g;\nconst RewritableAliases = /^([> \\t]*)\\[(\\S.+?\\S)\\]:\\s+(\\S+)(?:\\s+\"([^\\n]*)\"|\\s+'([^\\n]*)'|)(?=\\s*$)/gm;\nconst NormalizableLink = /\\s*((?:\\s?[^'\"\\(\\)\\]\\[\\s\\n]+)*)(?:\\s+[\"']([^\\n]*)[\"']|)/;\n\nexport class MarkoutBlockNormalizer {\n\t/**\n\t * @param {string} sourceText\n\t * @param {{ aliases?: { [name: string]: alias } }} [state]\n\t */\n\tnormalizeBlocks(sourceText, state = {}) {\n\t\tconst {sources = (state.sources = []), [ALIASES]: aliases = (state[ALIASES] = {})} = state;\n\n\t\tconst source = {sourceText, [BLOCKS]: [], [ALIASES]: {}};\n\t\tsources.push(source);\n\n\t\tBlocks: {\n\t\t\tconst body = [];\n\t\t\tconst {\n\t\t\t\tsourceText,\n\t\t\t\t[BLOCKS]: sourceBlocks,\n\t\t\t\t[BLOCKS]: {\n\t\t\t\t\t[MATCHES]: matchedBlocks = (sourceBlocks[MATCHES] = []),\n\t\t\t\t\t[MATCHES]: {fenced: fenced = (matchedBlocks.fenced = []), unfenced: unfenced = (matchedBlocks.unfenced = [])},\n\t\t\t\t},\n\t\t\t\t[ALIASES]: sourceAliases,\n\t\t\t\t[ALIASES]: {\n\t\t\t\t\t[MATCHES]: matchedAliases = (sourceAliases[MATCHES] = []),\n\t\t\t\t\t[MATCHES]: {aliased = (matchedAliases.aliased = []), unaliased = (matchedAliases.unaliased = [])},\n\t\t\t\t},\n\t\t\t} = source;\n\t\t\tlet match = (NormalizableBlocks.lastIndex = null);\n\n\t\t\tconst replaceAlias = (text, indent, alias, href, title, index) => {\n\t\t\t\tconst match = {text, indent, alias, href, title, index};\n\n\t\t\t\t// TODO: Figure out anchors: https://www.w3.org/TR/2017/REC-html52-20171214/links.html\n\t\t\t\treturn alias && alias.trim()\n\t\t\t\t\t? (aliased.push((sourceAliases[alias] = aliases[alias] = match)),\n\t\t\t\t\t  `<a hidden rel=\"alias\" name=\"${alias}\" href=\"${href}\">${title || ''}</a>`)\n\t\t\t\t\t: (unaliased.push(match), text);\n\t\t\t};\n\n\t\t\twhile ((match = NormalizableBlocks.exec(sourceText))) {\n\t\t\t\tmatchedBlocks.push(([match.text, match.fence, match.unfenced] = match));\n\t\t\t\tif (match.fence) {\n\t\t\t\t\tfenced.push(match);\n\t\t\t\t} else {\n\t\t\t\t\tunfenced.push(match);\n\t\t\t\t\tmatch.text = match.text.replace(RewritableAliases, replaceAlias);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tNormalization: {\n\t\t\tconst {[BLOCKS]: sourceBlocks} = source;\n\t\t\tfor (const {text, fence, unfenced} of sourceBlocks[MATCHES]) {\n\t\t\t\tsourceBlocks.push(\n\t\t\t\t\tfence\n\t\t\t\t\t\t? text\n\t\t\t\t\t\t: this.normalizeParagraphs(\n\t\t\t\t\t\t\t\tthis.normalizeBreaks(this.normalizeLists(this.normalizeReferences(text, state))),\n\t\t\t\t\t\t  ),\n\t\t\t\t);\n\t\t\t}\n\t\t\tsource.normalizedText = sourceBlocks.join('\\n');\n\t\t\timport.meta['debug:markout:block-normalization'] && console.log('normalizeSourceText:', state);\n\t\t}\n\n\t\treturn source.normalizedText;\n\t}\n\n\t/**\n\t * @param {string} sourceText\n\t * @param {{ aliases?: { [name: string]: alias } }} [state]\n\t */\n\tnormalizeReferences(sourceText, state = {}) {\n\t\tconst debugging = import.meta['debug:markout:anchor-normalization'];\n\t\tconst {aliases = (state.aliases = {})} = state;\n\n\t\treturn sourceText.replace(NormalizableReferences, (m, text, link, alias, index) => {\n\t\t\tconst reference = (alias && (alias = alias.trim())) || (link && (link = link.trim()));\n\n\t\t\tif (reference) {\n\t\t\t\tlet href, title;\n\t\t\t\t// debugging && console.log(m, {text, link, alias, reference, index});\n\t\t\t\tif (link) {\n\t\t\t\t\t[, href = '#', title] = NormalizableLink.exec(link);\n\t\t\t\t} else if (alias && alias in aliases) {\n\t\t\t\t\t({href = '#', title} = aliases[alias]);\n\t\t\t\t}\n\t\t\t\tdebugging && console.log(m, {href, title, text, link, alias, reference, index});\n\t\t\t\tif (m[0] === '!') {\n\t\t\t\t\treturn ` <img src=\"${href}\"${text || title ? ` title=\"${text || title}\"` : ''} /> `;\n\t\t\t\t} else {\n\t\t\t\t\ttext = text || encodeEntities(href);\n\t\t\t\t\treturn ` <a href=\"${href}\"${title ? ` title=\"${title}\"` : ''}>${text || reference}</a>`;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn m;\n\t\t});\n\t}\n\n\tnormalizeBlockquotes(sourceText) {\n\t\t// TODO: Normalize block quotes\n\t\treturn sourceText;\n\t}\n\n\t/**\n\t * @param {string} sourceText\n\t */\n\tnormalizeLists(sourceText) {\n\t\treturn sourceText.replace(NormalizableLists, (m, feed, body) => {\n\t\t\tlet match, indent;\n\t\t\tindent = feed.slice(1);\n\t\t\tconst top = new ComposableList();\n\t\t\tlet list = top;\n\t\t\tNormalizableListItem.lastIndex = 0;\n\t\t\twhile ((match = NormalizableListItem.exec(m))) {\n\t\t\t\tlet [, inset, marker, line] = match;\n\t\t\t\tif (!line.trim()) continue;\n\n\t\t\t\tif (marker) {\n\t\t\t\t\tlet depth = inset.length;\n\t\t\t\t\tif (depth > list.depth) {\n\t\t\t\t\t\tconst parent = list;\n\t\t\t\t\t\tlist.push((list = new ComposableList()));\n\t\t\t\t\t\tlist.parent = parent;\n\t\t\t\t\t} else if (depth < list.depth) {\n\t\t\t\t\t\twhile ((list = list.parent) && depth < list.depth);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!list) break;\n\n\t\t\t\t\t'inset' in list ||\n\t\t\t\t\t\t((list.inset = inset),\n\t\t\t\t\t\t(list.depth = depth),\n\t\t\t\t\t\t(list.type = marker === '* ' || marker === '- ' ? 'ul' : 'ol') === 'ol' &&\n\t\t\t\t\t\t\t(list.start = marker.replace(/\\W/g, '')));\n\n\t\t\t\t\t'style' in list ||\n\t\t\t\t\t\t(list.style =\n\t\t\t\t\t\t\t(list.type === 'ul' && ((marker[0] === '*' && 'disc') || 'square')) ||\n\t\t\t\t\t\t\t(marker[0] === '0' && 'decimal-leading-zero') ||\n\t\t\t\t\t\t\t(marker[0] > 0 && 'decimal') ||\n\t\t\t\t\t\t\t`${marker === marker.toLowerCase() ? 'lower' : 'upper'}-${\n\t\t\t\t\t\t\t\t/^[ivx]+\\. $/i.test(marker) ? 'roman' : 'latin'\n\t\t\t\t\t\t\t}`);\n\n\t\t\t\t\tline = line.replace(/[ \\t]*\\n[> \\t]*/g, ' ');\n\t\t\t\t\tlist.push(line);\n\t\t\t\t} else {\n\t\t\t\t\tif (list.length) {\n\t\t\t\t\t\tconst index = list.length - 1;\n\t\t\t\t\t\tlist[index] += `<p>${line}</p>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlist.push(new String(m));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn top.toString(indent);\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} sourceText\n\t */\n\tnormalizeParagraphs(sourceText) {\n\t\treturn (\n\t\t\tsourceText\n\t\t\t\t// .replace(MalformedParagraphs, (m, a, b, c, index, sourceText) => {\n\t\t\t\t// \t// console.log('normalizeParagraphs:\\n\\t%o%o\\u23CE%o [%o]', a, b, c, index);\n\t\t\t\t// \treturn `${a}${b}${(MERGED_MARKING && '\\u{23CE}') || ''} `;\n\t\t\t\t// })\n\t\t\t\t.replace(NormalizableParagraphs, (m, feed, inset, body) => {\n\t\t\t\t\tconst paragraphs = body\n\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t.split(/^(?:[> \\t]*\\n)+[> \\t]*/m)\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t\timport.meta['debug:markout:paragraph-normalization'] &&\n\t\t\t\t\t\tconsole.log('normalizeParagraphs:', {m, feed, inset, body, paragraphs});\n\n\t\t\t\t\t// return `${feed}<p>${paragraphs.join(`</p>${feed}<p>${feed}`)}</p>`;\n\t\t\t\t\treturn `${feed}<p>${paragraphs.join(`</p>\\n${inset}<p>`)}</p>\\n`;\n\t\t\t\t})\n\t\t);\n\t}\n\n\tnormalizeBreaks(sourceText) {\n\t\treturn sourceText.replace(RewritableParagraphs, (m, a, b, c, index, sourceText) => {\n\t\t\timport.meta['debug:markout:break-normalization'] &&\n\t\t\t\tconsole.log('normalizeBreaks:\\n\\t%o%o\\u23CE%o [%o]', a, b, c, index);\n\t\t\treturn `${a}${b}${MERGED_MARKING ? '<tt class=\"normalized-break\"> \\u{035C}</tt>' : ' '}`;\n\t\t});\n\t}\n}\n","﻿export class Segmenter extends RegExp {\n\t/**\n\t * @param {string | RegExp} pattern\n\t * @param {string} [flags]\n\t * @param {(string|undefined)[]} [types]\n\t */\n\tconstructor(pattern, flags, types) {\n\t\t(pattern &&\n\t\t\tpattern.types &&\n\t\t\tSymbol.iterator in pattern.types &&\n\t\t\t((!types && (types = pattern.types)) || types === pattern.types)) ||\n\t\t\tObject.freeze((types = (types && Symbol.iterator in types && [...types]) || []));\n\t\tconst {LOOKAHEAD = Segmenter.LOOKAHEAD, INSET = Segmenter.INSET, UNKNOWN = Segmenter.UNKNOWN} = new.target;\n\t\tObject.defineProperties(super(pattern, flags), {\n\t\t\ttypes: {value: types, enumerable: true},\n\t\t\tLOOKAHEAD: {value: LOOKAHEAD},\n\t\t\tINSET: {value: INSET},\n\t\t\tUNKNOWN: {value: UNKNOWN},\n\t\t\t// lookaheads: {value: (typeof LOOKAHEAD === 'symbol' && types.indexOf(LOOKAHEAD) + 1) || false},\n\t\t\t// insets: {value: (typeof insets === 'symbol' && types.indexOf(INSET) + 1) || false},\n\t\t});\n\t}\n\n\t/**\n\t * @param {RegExpExecArray} match\n\t */\n\tmatchType(text, index) {\n\t\treturn index > 0 && text !== undefined && match.types[index - 1] != null;\n\t}\n\n\tcapture(text, index, match) {\n\t\t// let typeOf;\n\t\tif (index === 0 || text === undefined) return;\n\n\t\tconst typeIndex = index - 1;\n\t\tconst type = this.types[typeIndex];\n\n\t\tif (type === INSET) {\n\t\t\tmatch.inset = text;\n\t\t\treturn;\n\t\t} else if (type === LOOKAHEAD) {\n\t\t\tmatch.lookahead = text;\n\t\t\treturn;\n\t\t} else if (type !== UNKNOWN) {\n\t\t\tswitch (typeof type) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tif (match.typeIndex > -1) return;\n\t\t\t\t\tmatch.type = type;\n\t\t\t\t\tmatch.typeIndex = typeIndex;\n\t\t\t\tcase 'symbol':\n\t\t\t\t\tmatch[type] = text;\n\t\t\t\t\treturn;\n\t\t\t\tcase 'function':\n\t\t\t\t\ttype(text, index, match);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {RegExpExecArray} match\n\t * @returns {typeof match & {slot: number, type: string}}\n\t */\n\texec(source) {\n\t\tconst match = super.exec(source);\n\t\tmatch &&\n\t\t\t((match.typeIndex = -1),\n\t\t\tmatch.forEach(this.capture || Segmenter.prototype.capture, this),\n\t\t\tmatch.typeIndex > -1 || ((match.type = 'unknown'), (match.typeIndex = -1)),\n\t\t\tnull);\n\n\t\treturn match;\n  }\n\n\tstatic define(factory, flags) {\n\t\tconst types = [];\n\t\tconst RegExp = (this && (this.prototype === Segmenter || this.prototype instanceof Segmenter) && this) || Segmenter;\n    const pattern = factory(type => (types.push((type != null || undefined) && type), ''));\n\n    flags = `${(flags == null ? pattern && pattern.flags : flags) || ''}`;\n\n\t\treturn new RegExp(pattern, flags, types);\n\t}\n}\n\nexport const {INSET, UNKNOWN, LOOKAHEAD} = Object.defineProperties(Segmenter, {\n\tINSET: {value: Symbol.for('INSET'), enumerable: true},\n\tUNKNOWN: {value: Symbol.for('UNKNOWN'), enumerable: true},\n\tLOOKAHEAD: {value: Symbol.for('LOOKAHEAD'), enumerable: true},\n});\n","﻿// import dynamicImport from '/browser/dynamicImport.js';\n// import dynamicImport from '/browser/dynamicImport.js';\nimport {sequence} from '/markout/lib/helpers.js';\n// import {Segmenter, INSET, LOOKAHEAD, UNKNOWN} from './segmenter.js';\nimport {Segmenter, INSET, LOOKAHEAD, UNKNOWN} from '../../../modules/segmenter/segmenter.js';\n\n// console.log(import.meta.url);\n\nglobalThis.$mo = async function debug(specifier = '/markout/examples/markdown-testsuite.md') {\n\tconst timestamp = `?${encodeURIComponent(Date.now())}`;\n\t// const {MarkoutSegments} = await import(`/markout/lib/experimental/markout-segmenter.js${timestamp}`);\n\tconst url = new URL(specifier, location);\n\tconst response = await fetch(url);\n\tif (!response.ok) console.warn(Error(`Failed to fetch ${url}`));\n\tconst sourceText = await response.text();\n\t// console.log(dynamicImport);\n\t// const {debugSegmenter} = await dynamicImport('/modules/segmenter/segmenter.debug.js');\n\tconst {debugSegmenter} = await (1, eval)('specifier => import(specifier)')('/modules/segmenter/segmenter.debug.js');\n\tdebugSegmenter(MarkoutSegments, sourceText);\n};\n\nexport const MarkoutSegments = (() => {\n\tconst MarkoutLists = sequence`[-*]|[1-9]+\\d*\\.|[ivx]+\\.|[a-z]\\.`;\n\tconst MarkoutMatter = sequence`---(?=\\n.+)(?:\\n.*)+?\\n---`;\n\tconst MarkoutStub = sequence`<!--[^]*?-->|<!.*?>|<\\?.*?\\?>|<%.*?%>|<(?:\\b|\\/).*(?:\\b|\\/)>.*`;\n\tconst MarkoutStart = sequence`(?!(?:${MarkoutLists}) )(?:[^#${'`'}~<>|\\n\\s]|${'`'}{1,2}(?!${'`'})|~{1, 2}(?!~))`;\n\tconst MarkoutLine = sequence`(?:${MarkoutStart})(?:${MarkoutStub}|.*)*$`;\n\t// const MarkoutDivider = sequence`-(?:[ \\t]*-)+|=(?:=[ \\t]*)+`;\n\tconst MarkoutDivider = sequence`-{2,}|={2,}|\\*{2,}|(?:- ){2,}-|(?:= ){2,}=|(?:\\* ){2,}\\*`;\n\tconst MarkoutATXHeading = sequence`#{1,6}(?= +${MarkoutLine})`;\n\tconst MarkoutTextHeading = sequence`${MarkoutStart}.*\\n(?=\\2\\={3,}\\n|\\2\\-{3,}\\n)`;\n\n\tconst MarkoutSegments = Segmenter.define(\n\t\ttype =>\n\t\t\tsequence`^\n\t\t  (?:\n\t\t    ${type(UNKNOWN)}(${MarkoutMatter}$|[ \\t]*(?:${MarkoutStub})[ \\t]*$)|\n\t\t    (?:\n\t\t      ${type(INSET)}((?:  |\\t)*?(?:> ?)*?(?:> ?| *))\n\t\t      (?:\n\t\t        ${type('fence')}(?:(${'```'}|~~~)(?=.*\\n)[^]*?\\n\\2\\3.*$)|\n\t\t        ${type('table')}(?:([|](?=[ :-]).+[|]$)(?:\\n\\2[|].+[|]$)+)|\n\t\t        ${type('heading')}(?:(${MarkoutATXHeading}|${MarkoutTextHeading}).*$)|\n\t\t        ${type('list')}(?:(${MarkoutLists}) +${MarkoutLine}(?:\\n\\2 {2,4}${MarkoutLine})*$)|\n\t\t        ${type('alias')}(?:(\\[.+?\\]: .+)$)|\n\t\t        ${type('divider')}(?:(${MarkoutDivider})$)|\n\t\t        ${type('feed')}(?:([ \\t]*(?:\\n\\2[ \\t])*)$)|\n\t\t        ${type('paragraph')}(?:(${MarkoutLine}(?:\\n\\2 {0,2}${MarkoutLine})*)$)\n\t\t      )|\n\t\t      ${type(UNKNOWN)}(.+?$)\n\t\t    )\n\t\t  )(?=${type(LOOKAHEAD)}(\\n?^.*$)?)\n\t\t`,\n\t\t'gmi',\n\t);\n\treturn MarkoutSegments;\n})();\n","﻿import {normalizeString, matchAll} from '/markout/lib/helpers.js';\nimport {MarkoutBlockNormalizer} from './block-normalizer.js';\nimport {MarkoutSegments} from './markout-segmenter.js';\n\nconst {\n\t// Attempts to overcome **__**\n\t// 'markout-render-merged-marking': MERGED_MARKING = true,\n\t'markout-segmentation': MARKOUT_SEGMENTATION = true,\n} = import.meta;\n\nconst MATCHES = Symbol('matches');\nconst ALIASES = 'aliases';\nconst BLOCKS = 'blocks';\n\nexport class MarkoutSegmentNormalizer extends MarkoutBlockNormalizer {\n\t/**\n\t * @param {string} sourceText\n\t * @param {{ aliases?: { [name: string]: alias } }} [state]\n\t */\n\tnormalizeSegments(sourceText, state = {}) {\n\t\tconst {sources = (state.sources = []), [ALIASES]: aliases = (state[ALIASES] = {})} = state;\n\n\t\t// for (const segment of matchAll(sourceText, MarkoutSegments)) {}\n\n\t\ttry {\n\t\t\tstate.segments = [...matchAll(sourceText, MarkoutSegments)];\n\n\t\t\treturn this.normalizeBlocks(sourceText, state);\n\t\t} finally {\n\t\t\timport.meta['debug:markout:segment-normalization'] && console.log('normalizeSegments:', state);\n\t\t}\n\n\t\t// const source = {sourceText, [BLOCKS]: [], [ALIASES]: {}};\n\t\t// sources.push(source);\n\n\t\t// MarkoutBlocks.debug(sourceText);\n\n\t\tBlocks: {\n\t\t\t// const body = [];\n\t\t\t// const {\n\t\t\t// \tsourceText,\n\t\t\t// \t[BLOCKS]: sourceBlocks,\n\t\t\t// \t[BLOCKS]: {\n\t\t\t// \t\t[MATCHES]: matchedBlocks = (sourceBlocks[MATCHES] = []),\n\t\t\t// \t\t[MATCHES]: {fenced: fenced = (matchedBlocks.fenced = []), unfenced: unfenced = (matchedBlocks.unfenced = [])},\n\t\t\t// \t},\n\t\t\t// \t[ALIASES]: sourceAliases,\n\t\t\t// \t[ALIASES]: {\n\t\t\t// \t\t[MATCHES]: matchedAliases = (sourceAliases[MATCHES] = []),\n\t\t\t// \t\t[MATCHES]: {aliased = (matchedAliases.aliased = []), unaliased = (matchedAliases.unaliased = [])},\n\t\t\t// \t},\n\t\t\t// } = source;\n\t\t\t// let match = (NormalizableBlocks.lastIndex = null);\n\t\t\t// const replaceAlias = (text, indent, alias, href, title, index) => {\n\t\t\t// \tconst match = {text, indent, alias, href, title, index};\n\t\t\t// \t// TODO: Figure out anchors: https://www.w3.org/TR/2017/REC-html52-20171214/links.html\n\t\t\t// \treturn alias && alias.trim()\n\t\t\t// \t\t? (aliased.push((sourceAliases[alias] = aliases[alias] = match)),\n\t\t\t// \t\t  `<a hidden rel=\"alias\" name=\"${alias}\" href=\"${href}\">${title || ''}</a>`)\n\t\t\t// \t\t: (unaliased.push(match), text);\n\t\t\t// };\n\t\t\t// while ((match = NormalizableBlocks.exec(sourceText))) {\n\t\t\t// \tmatchedBlocks.push(([match.text, match.fence, match.unfenced] = match));\n\t\t\t// \tif (match.fence) {\n\t\t\t// \t\tfenced.push(match);\n\t\t\t// \t} else {\n\t\t\t// \t\tunfenced.push(match);\n\t\t\t// \t\tmatch.text = match.text.replace(RewritableAliases, replaceAlias);\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\n\t\tNormalization: {\n\t\t\t// const {[BLOCKS]: sourceBlocks} = source;\n\t\t\t// for (const {text, fence, unfenced} of sourceBlocks[MATCHES]) {\n\t\t\t// \tsourceBlocks.push(\n\t\t\t// \t\tfence\n\t\t\t// \t\t\t? text\n\t\t\t// \t\t\t: this.normalizeParagraphs(\n\t\t\t// \t\t\t\t\tthis.normalizeBreaks(this.normalizeLists(this.normalizeReferences(text, state))),\n\t\t\t// \t\t\t  ),\n\t\t\t// \t);\n\t\t\t// }\n\t\t\t// source.normalizedText = sourceBlocks.join('\\n');\n\t\t\timport.meta['debug:markout:block-normalization'] && console.log('normalizeSourceText:', state);\n\t\t}\n\n\t\t// return source.normalizedText;\n\t}\n}\n\n/// Debugging\n\nimport {debugging} from '/markout/lib/helpers.js';\n\ndebugging('markout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\ttypeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bmarkout|$)\\b/.test(location.search),\n\t'segment-normalization',\n\t'block-normalization',\n\t'paragraph-normalization',\n\t'anchor-normalization',\n\t'break-normalization',\n]);\n","﻿import {MarkoutSegmentNormalizer} from './experimental/segment-normalizer.js';\nimport {normalizeString} from '/markout/lib/helpers.js';\n\nconst {\n\t// 'markout-render-merged-marking': MERGED_MARKING = true,\n} = import.meta;\n\nexport class MarkoutNormalizer extends MarkoutSegmentNormalizer {\n\tnormalizeSourceText(sourceText) {\n\t\tconst {normalized = (this.normalized = new Map())} = this;\n\t\tlet normalizedText = normalized.get(sourceText);\n\t\tnormalizedText !== undefined ||\n\t\t\tnormalized.set(\n\t\t\t\tsourceText,\n\t\t\t\t(normalizedText = normalizeString(this.normalizeSegments(normalizeString(sourceText)))),\n\t\t\t);\n\t\treturn normalizedText;\n\t}\n}\n","﻿export * from './entities.js';\n\nimport {MarkoutNormalizer} from './normalizer.js';\n\nconst {\n\t// Attempts to overcome **__**\n\t'markout-render-span-restacking': SPAN_RESTACKING = true,\n\t'markout-render-newline-consolidation': NEWLINE_CONSOLIDATION = false,\n} = import.meta;\n\n// import {tokenize as tokenizeMarkup, encodeEntities} from '../../../markup/dist/tokenizer.browser.js';\nimport {tokenize as tokenizeMarkup, encodeEntities} from './markup.js';\n\nexport const SourceType = 'source-type';\nexport const SourceParameters = 'source-parameters';\nexport const MarkupSyntax = 'markup-syntax';\n\nexport const normalize = sourceText => {\n\tconst {normalizer = (normalize.normalizer = new MarkoutNormalizer())} = normalize;\n\treturn normalizer.normalizeSourceText(sourceText);\n};\n\nexport const render = tokens => {\n\tconst {\n\t\tpunctuators = (render.punctuators = createPunctuators()),\n\t\trenderer = (render.renderer = new MarkoutRenderer({punctuators})),\n\t} = render;\n\treturn renderer.renderTokens(tokens);\n};\n\nexport const tokenize = sourceText => tokenizeMarkup(`${sourceText.trim()}\\n}`, {sourceType: 'markdown'});\n\nconst FencedBlockHeader = /^(?:(\\w+)(?:\\s+(.*?)\\s*|)$|)/m;\n\nclass MarkoutRenderingContext {\n\tconstructor(renderer) {\n\t\t({punctuators: this.punctuators} = this.renderer = renderer);\n\n\t\t[\n\t\t\tthis.passthru,\n\t\t\tthis.block,\n\t\t\tthis.fenced,\n\t\t\tthis.header,\n\t\t\tthis.indent,\n\t\t\tthis.newlines,\n\t\t\tthis.comment,\n\t\t] = this.renderedText = '';\n\n\t\tSPAN_RESTACKING && createSpanStack(this);\n\t}\n}\n\nclass MarkoutRenderer {\n\tconstructor({punctuators = createPunctuators()} = {}) {\n\t\tthis.punctuators = punctuators;\n\t}\n\trenderTokens(tokens, context = new MarkoutRenderingContext(this)) {\n\t\tcontext.tokens = tokens;\n\n\t\tconst {punctuators} = context;\n\t\tconst {renderClasses} = this;\n\n\t\tfor (const token of context.tokens) {\n\t\t\tif (!token || !token.text) continue;\n\t\t\tlet {text, type = 'text', punctuator, breaks, hint, previous} = token;\n\t\t\tlet body = text;\n\n\t\t\tif (context.passthru || context.fenced) {\n\t\t\t\tif (context.fenced) {\n\t\t\t\t\tif (context.fenced === context.passthru) {\n\t\t\t\t\t\tcontext.header += text;\n\t\t\t\t\t\tbreaks && ((context.header = context.header.trimRight()), (context.passthru = ''));\n\t\t\t\t\t} else if (punctuator === 'closer' && text === '```') {\n\t\t\t\t\t\tlet sourceType, sourceParameters;\n\t\t\t\t\t\tif (context.header) {\n\t\t\t\t\t\t\t[, sourceType = 'markup', sourceParameters] = FencedBlockHeader.exec(context.header);\n\t\t\t\t\t\t\timport.meta['debug:fenced-block-header-rendering'] &&\n\t\t\t\t\t\t\t\tconsole.log('fenced-block-header', {\n\t\t\t\t\t\t\t\t\tfenced: context.fenced,\n\t\t\t\t\t\t\t\t\theader: context.header,\n\t\t\t\t\t\t\t\t\tpassthru: context.passthru,\n\t\t\t\t\t\t\t\t\tsourceType,\n\t\t\t\t\t\t\t\t\tsourceParameters,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// passthru rendered code\n\t\t\t\t\t\tcontext.renderedText += `<${context.block} class=\"markup code\" ${SourceType}=\"${sourceType || 'markup'}\"${\n\t\t\t\t\t\t\t// sourceParameters ? ` ${SourceParameters}=\"${sourceParameters}\"` : ''\n\t\t\t\t\t\t\t(sourceParameters && ` ${sourceParameters}`) || ''\n\t\t\t\t\t\t}>${encodeEntities(context.passthru)}</${context.block}>`;\n\t\t\t\t\t\tcontext.header = context.indent = context.fenced = context.passthru = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// passthru code\n\t\t\t\t\t\tcontext.passthru += body.replace(context.indent, '');\n\t\t\t\t\t}\n\t\t\t\t\t// continue;\n\t\t\t\t} else {\n\t\t\t\t\t// passthru body\n\t\t\t\t\tcontext.passthru += body;\n\t\t\t\t\tif (punctuator === 'closer' || (context.comment && punctuator === 'comment')) {\n\t\t\t\t\t\t// passthru body rendered\n\t\t\t\t\t\tcontext.renderedText += context.passthru;\n\t\t\t\t\t\tcontext.passthru = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet tag = 'span';\n\t\t\tconst classes = hint.split(/\\s+/);\n\t\t\tlet before, after;\n\n\t\t\tif (hint === 'markdown' || hint.startsWith('markdown ') || hint.includes('in-markdown')) {\n\t\t\t\t(type === 'text' && breaks) ||\n\t\t\t\t\t(!text.trim() && (type = 'whitespace')) ||\n\t\t\t\t\t(text in punctuators.entities && (body = punctuators.entities[text]));\n\n\t\t\t\tif (punctuator) {\n\t\t\t\t\tcontext.passthru =\n\t\t\t\t\t\t(((context.comment = punctuator === 'comment' && text) || punctuators.tags.has(text)) && text) || '';\n\t\t\t\t\tif (context.passthru) continue;\n\t\t\t\t\t// SPAN_RESTACKING && punctuator === 'opener' && context.stack[text] >= 0 && (punctuator = 'closer');\n\t\t\t\t\tif (punctuator === 'opener') {\n\t\t\t\t\t\tif ((context.fenced = text === '```' && text)) {\n\t\t\t\t\t\t\tcontext.block = 'pre';\n\t\t\t\t\t\t\tcontext.passthru = context.fenced;\n\t\t\t\t\t\t\t[context.indent = ''] = /^[ \\t]*/gm.exec(previous.text);\n\t\t\t\t\t\t\tcontext.indent && (context.indent = new RegExp(String.raw`^${context.indent}`, 'mg'));\n\t\t\t\t\t\t\tcontext.header = '';\n\t\t\t\t\t\t\t// punctuator opener fence\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (text in punctuators.spans) {\n\t\t\t\t\t\t\tif (SPAN_RESTACKING && (before = context.stack.open(text, body, classes)) === undefined) continue;\n\t\t\t\t\t\t\tbefore || ((before = `<${punctuators.spans[text]}${renderClasses(classes)}>`), classes.push('opener'));\n\t\t\t\t\t\t} else if (text === '<!' || text === '<%') {\n\t\t\t\t\t\t\t// Likely <!doctype …> || Processing instruction\n\t\t\t\t\t\t\tlet next;\n\t\t\t\t\t\t\twhile (\n\t\t\t\t\t\t\t\t(next = context.tokens.next().value) &&\n\t\t\t\t\t\t\t\t(body += next.text) &&\n\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t(next.punctuator === 'opener' && /^</.test(next.text)) ||\n\t\t\t\t\t\t\t\t\t(next.punctuator === 'closer' && />$/.test(next.text))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontext.passthru = body;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (punctuator === 'closer') {\n\t\t\t\t\t\tif (text === '```') {\n\t\t\t\t\t\t\tcontext.block = punctuators.blocks['```'] || 'pre';\n\t\t\t\t\t\t} else if (text in punctuators.spans) {\n\t\t\t\t\t\t\tif (SPAN_RESTACKING && (after = context.stack.close(text, body, classes)) === undefined) continue;\n\t\t\t\t\t\t\tafter || ((after = `</${punctuators.spans[text]}>`), classes.push('closer'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t(before || after) && (tag = 'tt');\n\t\t\t\t\tclasses.push(`${punctuator}-token`);\n\t\t\t\t} else {\n\t\t\t\t\tif (breaks) {\n\t\t\t\t\t\t(!context.block && (tag = 'br')) || ((after = `</${context.block}>`) && (context.block = body = ''));\n\t\t\t\t\t} else if (type === 'sequence') {\n\t\t\t\t\t\tif (text[0] === '`') {\n\t\t\t\t\t\t\ttag = 'code';\n\t\t\t\t\t\t\tbody = text.replace(/(``?)(.*)\\1/, '$2');\n\t\t\t\t\t\t\tlet fence = '`'.repeat((text.length - body.length) / 2);\n\t\t\t\t\t\t\tbody = encodeEntities(body.replace(/&nbsp;/g, '\\u202F'));\n\t\t\t\t\t\t\tfence in punctuators.entities && (fence = punctuators.entities[fence]);\n\t\t\t\t\t\t\tclasses.push('fenced-code');\n\t\t\t\t\t\t\tclasses.push('code');\n\t\t\t\t\t\t} else if (text.startsWith('---') && !/[^\\-]/.test(text)) {\n\t\t\t\t\t\t\ttag = 'hr';\n\t\t\t\t\t\t} else if (!context.block && (context.block = punctuators.blocks[text])) {\n\t\t\t\t\t\t\tlet skip;\n\t\t\t\t\t\t\tlet previous = token;\n\t\t\t\t\t\t\tlet inset = '';\n\t\t\t\t\t\t\twhile ((previous = previous.previous)) {\n\t\t\t\t\t\t\t\tif (previous.breaks) break;\n\t\t\t\t\t\t\t\tinset = `${previous.text}${inset}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!/[^> \\t]/.test(inset)) {\n\t\t\t\t\t\t\t\tbefore = `<${context.block}${renderClasses(classes)}>`;\n\t\t\t\t\t\t\t\ttag = 'tt';\n\t\t\t\t\t\t\t\tclasses.push('opener', `${type}-token`);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbody = text;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// sequence\n\t\t\t\t\t\t\tbody = text;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (type === 'whitespace') {\n\t\t\t\t\t\t// if (span === 'code') body.replace(/\\xA0/g, '&nbsp;');\n\t\t\t\t\t\ttag = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// debug(`${type}:token`)(type, token);\n\t\t\t\t\t\tclasses.push(`${type}-token`);\n\t\t\t\t\t\tbody = text;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst details =\n\t\t\t\ttag &&\n\t\t\t\t[\n\t\t\t\t\tpunctuator && `punctuator=\"${punctuator}\"`,\n\t\t\t\t\ttype && `token-type=\"${type}\"`,\n\t\t\t\t\tbreaks && `token-breaks=\"${breaks}\"`,\n\t\t\t\t\thint && `token-hint=\"${hint}\"`,\n\t\t\t\t].join(' ');\n\n\t\t\tbefore && (context.renderedText += before);\n\t\t\ttag === 'br' || (context.newlines = 0)\n\t\t\t\t? (!NEWLINE_CONSOLIDATION && (context.renderedText += '\\n')) ||\n\t\t\t\t  (context.newlines++ && (context.renderedText += '\\n')) ||\n\t\t\t\t  (context.renderedText += '<br/>')\n\t\t\t\t: tag === 'hr'\n\t\t\t\t? (context.renderedText += '<hr/>')\n\t\t\t\t: body &&\n\t\t\t\t  (tag\n\t\t\t\t\t\t? (context.renderedText += `<${tag} ${details}${renderClasses(classes)}>${body}</${tag}>`)\n\t\t\t\t\t\t: (context.renderedText += body));\n\t\t\tafter && (context.renderedText += after);\n\t\t}\n\n\t\treturn context.renderedText;\n\t\t// return (context.output = new MarkoutOutput(context));\n\t}\n\n\trenderClasses(classes) {\n\t\treturn ((classes = [...classes].filter(Boolean).join(' ')) && ` class=\"${classes}\"`) || '';\n\t}\n}\n\nclass MarkoutOutput extends String {\n\tconstructor(context) {\n\t\tsuper(context.renderedText).context = context;\n\t}\n}\n\n// render.classes = classes => ((classes = classes.filter(Boolean).join(' ')) && ` class=\"${classes}\"`) || '';\n\n/// Features\n\nconst createPunctuators = (\n\trepeats = {['*']: 2, ['`']: 3, ['#']: 6},\n\tentities = {['*']: '&#x2217;', ['`']: '&#x0300;'},\n\taliases = {'*': ['_'], '**': ['__'], '`': ['``']},\n\tblocks = {['-']: 'li', ['>']: 'blockquote', ['#']: 'h*', ['```']: 'pre'},\n\tspans = {['*']: 'i', ['**']: 'b', ['~~']: 's', ['`']: 'code'},\n\ttags = ['<', '>', '<!--', '-->', '<%', '%>', '</', '/>'],\n) => {\n\tconst {keys} = Object;\n\tconst symbols = new Set([...Object.keys(repeats), ...Object.keys(entities)]);\n\tfor (const symbol of symbols) {\n\t\tlet n = repeats[symbol] || 1;\n\t\tconst entity = entities[symbol];\n\t\tlet block = blocks[symbol];\n\t\tlet span = spans[symbol];\n\t\tconst tag = block || span;\n\t\tconst map = (block && blocks) || (span && spans);\n\t\tfor (let i = 1; n--; i++) {\n\t\t\tconst k = symbol.repeat(i);\n\t\t\tconst b = blocks[k];\n\t\t\tconst s = spans[k];\n\t\t\tconst m = (b && blocks) || (s && spans) || map;\n\t\t\tconst t = (b || s || m[k] || tag).replace('*', i);\n\t\t\tconst e = entities[k] || (entity && entity.repeat(i));\n\t\t\tm[k] = t;\n\t\t\te && (entities[k] = e);\n\t\t\tif (k in aliases) for (const a of aliases[k]) (m[a] = t), e && (entities[a] = e);\n\t\t}\n\t}\n\tfor (let h = 1, c = 2080, n = 6; n--; entities['#'.repeat(h)] = `#<sup>&#x${c + h++};</sup>`);\n\n\treturn {entities, blocks, spans, tags: new Set(tags)};\n};\n\nconst createSpanStack = context => {\n\tconst {\n\t\tpunctuators: {spans},\n\t\trenderer,\n\t} = context;\n\tconst stack = [];\n\tstack.open = (text, body, classes) => {\n\t\tconst {[text]: lastIndex, length: index} = stack;\n\t\tif (lastIndex < 0) return (stack[text] = undefined); // ie continue\n\t\tif (lastIndex >= 0) return stack.close(text, body, classes);\n\t\tconst span = spans[text];\n\t\tconst before = `<${span}${renderer.renderClasses(classes)}>`;\n\t\tstack[text] = index;\n\t\tstack.push({text, body, span, index});\n\t\treturn classes.push('opener'), before;\n\t};\n\tstack.close = (text, body, classes) => {\n\t\tconst span = spans[text];\n\t\tconst {[text]: index, length} = stack;\n\t\tif (index === length - 1) {\n\t\t\tindex >= 0 && (stack.pop(), (stack[text] = undefined));\n\t\t\tconst after = `</${span}>`;\n\t\t\treturn classes.push('closer'), after;\n\t\t} else if (index >= 0) {\n\t\t\tclasses.push('closer', `closer-token`);\n\t\t\tconst details = `token-type=\"auto\"${renderer.renderClasses(classes)}`;\n\t\t\tconst closing = stack.splice(index, length).reverse();\n\t\t\tfor (const {span, text, body} of closing) {\n\t\t\t\tcontext.renderedText += `<tt punctuator=\"closer\" ${details}>${body}</tt></${span}>`;\n\t\t\t\tstack[text] < index || (stack[text] = -1);\n\t\t\t}\n\t\t} else {\n\t\t\tcontext.renderedText += text;\n\t\t}\n\t};\n\tcontext.stack = stack;\n};\n\n/** @typedef {{text?: string, indent?: string, index: number}} match */\n/** @typedef {{href: string, title: string}} alias */\n\n/////\n\n// import {sequence} from '../../../../markup/packages/tokenizer/examples/browser/helpers.js';\n// import {matchAll, sequence} from '/markout/lib/helpers.js';\n// import {MarkoutBlocks} from './experimental/normalizer.js';\n\n/// Debugging\n\nimport {debugging} from '/markout/lib/helpers.js';\n\ndebugging('markout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\ttypeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bmarkout|$)\\b/.test(location.search),\n\t'block-normalization',\n\t'paragraph-normalization',\n\t'anchor-normalization',\n\t'break-normalization',\n\t'fenced-block-header-rendering',\n]);\n","﻿import dynamicImport from '/browser/dynamicImport.js';\nimport {html, css, Component, Assets} from '../lib/components.js';\nimport * as markout from '../../packages/markout/lib/markout.js';\nimport * as markup from '../../markup/dist/tokenizer.browser.js';\n\nconst {\n\t'markout-content-normalization': CONTENT_NORMALIZATION = undefined,\n\t'markout-content-breaks-normalization': BREAKS_NORMALIZATION = undefined,\n\t'markout-content-headings-normalization': HEADINGS_NORMALIZATION = true,\n\t'markout-content-paragraph_normalization': PARAGRAPHS_NORMALIZATION = true,\n\t'markout-content-source-text-rendering': SOURCE_TEXT_RENDERING = true,\n} = import.meta;\n\nconst assets = new Assets({base: new URL('../', import.meta.url)}, 'style:styles/markout.css');\n\nconst {SourceType, MarkupSyntax} = markout;\n\nconst stylesheet = assets['style:styles/markout.css'];\n\nconst styles = css`\n\t@import \"${stylesheet}\";\n\n\t:host {\n\t\tpadding: 1rem 2rem;\n\t\twhite-space: normal;\n\t}\n\n\t.hide {\n\t\topacity: 0;\n\t\tdisplay: block;\n\t}\n\n\t#wrapper {\n\t\twill-change: transition;\n\t\ttransition: 375ms / 125ms;\n\t}\n\n\t#content {\n\t\twill-change: transition;\n\t\ttransition: opacity 250ms;\n\t}\n\n\t#content tt.opener:first-child,\n\t#content tt.closer:last-child {\n\t\tdisplay: none !important;\n\t}\n\n\t#content .markout-content {\n\t\tborder: 0.075rem solid #9992;\n\t\tborder-radius: 3px;\n\t\tposition: relative;\n\t\tpadding: 1em 2em;\n\t\tpadding-inline-start: 2em;\n\t\tdisplay: block;\n\t\tcontain: style;\n\t}\n\n\t@media only screen and (max-width: 45rem) {\n\t\t:host {\n\t\t\tfont-size: 85%;\n\t\t}\n\t}\n`;\n\nexport class MarkoutContent extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.name = `${this.tagName}-${++new.target.instance}`.toLocaleLowerCase();\n\n\t\t/** @type {SLOT} */ const slot = this['::'];\n\t\tslot && slot.addEventListener('slotchange', event => this.isConnected && this.updateContent(slot), {passive: true});\n\t}\n\n\tconnectedCallback() {\n\t\t'renderedText' in this || this.renderContent(this.sourceText);\n\t\tsuper.connectedCallback();\n\t}\n\n\tasync updateContent(slot = this['::']) {\n\t\tconst assignedNodes = slot && slot.assignedNodes();\n\t\tif (assignedNodes.length) return this.renderContent(this.sourceText || '');\n\t}\n\n\tasync renderContent(sourceText) {\n\t\t/** @type {this & {'::': SLOT, '::content': SLOT, '#wrapper': DIV, '#links': DIV, sourceURL?: string | URL}} */\n\t\tconst {'::content': content, '::': slot = content, '#wrapper': wrapper, '#links': links, sourceURL} = this;\n\n\t\targuments.length || (sourceText = this.sourceText);\n\n\t\tif (sourceText === this.renderedText) return;\n\t\tif (!sourceText) return void (this.renderedText = content.textContent = '');\n\n\t\twrapper.style.transition = content.style.transition = '0s';\n\t\tcontent.hidden = wrapper.hidden = true;\n\t\tcontent.classList.add('hide');\n\t\twrapper.classList.add('hide');\n\t\tawait new Promise(resolve => requestAnimationFrame(resolve));\n\n\t\twrapper.style.transition = content.style.transition = '';\n\t\twrapper.classList.remove('hide');\n\t\twrapper.hidden = false;\n\n\t\tawait this.renderMarkdown(sourceText || this.sourceText, content);\n\n\t\tthis.renderedText = sourceText;\n\n\t\tconst timeout = new Promise(resolve => setTimeout(resolve, 150));\n\n\t\tif (links) {\n\t\t\tthis.innerHTML = '';\n\t\t\tlinks.innerHTML = `<!-- Links from markout content: ${sourceURL || '‹text›'} -->\\n`;\n\t\t\tconst stylesheets = [];\n\t\t\tconst baseURL = sourceURL || this.baseURI;\n\n\t\t\tfor (const link of content.querySelectorAll(`script[src],style[src]`)) {\n\t\t\t\tconst {nodeName, rel, baseURI, slot, parentElement, previousElementSibling} = link;\n\t\t\t\tif (slot && slot !== 'links') continue;\n\t\t\t\tconst type = `${link.type || ''}`.trim().toLowerCase();\n\t\t\t\tconst src = link.getAttribute('src');\n\t\t\t\tconst href = link.getAttribute('href');\n\t\t\t\tconst base = link.hasAttribute('base') ? baseURI : baseURL;\n\t\t\t\tconst url = new URL(src || href, base);\n\t\t\t\tswitch (nodeName) {\n\t\t\t\t\tcase 'SCRIPT':\n\t\t\t\t\t\tif (type === 'module') {\n\t\t\t\t\t\t\tdynamicImport(url);\n\t\t\t\t\t\t\tlink.remove();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (!type && parentElement && parentElement.nodeName === 'OUTPUT' && 'evaluateScript' in this) {\n\t\t\t\t\t\t\tlink.src = url;\n\t\t\t\t\t\t\tthis.evaluateScript(link);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 'STYLE':\n\t\t\t\t\t\tif ((src && !type) || type === 'text/css') {\n\t\t\t\t\t\t\tstylesheets.push(url);\n\t\t\t\t\t\t\tlink.remove();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// TODO: Ensure base attribute bahviour holds\n\t\t\t\t\t\t// link.slot = 'links';\n\t\t\t\t\t\tlink.setAttribute('base', base);\n\t\t\t\t\t\tlinks.appendChild(link);\n\t\t\t\t}\n\n\t\t\t\t!stylesheets.length ||\n\t\t\t\t\tlinks.appendChild(\n\t\t\t\t\t\tObject.assign(document.createElement('style'), {\n\t\t\t\t\t\t\ttextContent: stylesheets.map(url => `@import \"${url}\";`).join('\\n'),\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tawait Promise.race([stylesheet, timeout]);\n\t\tawait timeout;\n\n\t\tcontent.classList.remove('hide');\n\t\tcontent.hidden = false;\n\n\t\tif (this.rewriteAnchors) {\n\t\t\tconst anchors = content.querySelectorAll('a[href]');\n\t\t\tanchors && this.rewriteAnchors([...anchors]);\n\t\t}\n\t}\n\n\tscrollToAnchor(anchor) {\n\t\t/** @type {HTMLAnchorElement} */\n\t\tlet target;\n\t\tconst {'::content': content} = this;\n\t\tanchor && (target = content.querySelector(`a[id=\"${anchor}\"]`))\n\t\t\t? target.scrollIntoView({behavior: 'smooth', block: 'start', inline: 'nearest'})\n\t\t\t: console.warn('scrollIntoView: %o', {anchor, target});\n\t}\n\n\tasync evaluateScript(script) {\n\t\tconst {src} = script;\n\t\tconst sourceText = await (await fetch(src)).text();\n\t\tawait new Promise(requestAnimationFrame);\n\t\tdocument['--currentScript--'] = script;\n\t\t(1, eval)(`${sourceText}\\ndelete document['--currentScript--']`);\n\t}\n\n\tnormalizeBreaksInFragment(fragment) {\n\t\tfor (const br of fragment.querySelectorAll('br')) {\n\t\t\tconst {previousSibling, nextSibling, parentElement} = br;\n\t\t\t(!previousSibling ||\n\t\t\t\tpreviousSibling.nodeName !== 'SPAN' ||\n\t\t\t\t!nextSibling ||\n\t\t\t\tnextSibling.nodeName !== 'SPAN' ||\n\t\t\t\t(parentElement && !/^(?:CODE|PRE|LI)$/.test(parentElement.nodeName))) &&\n\t\t\t\tbr.remove();\n\t\t}\n\t}\n\n\tnormalizeHeadingsInFragment(fragment) {\n\t\tconst {MarkdownIdentity: Identity, MarkdownIdentityPrefixer: Prefixer, MarkdownIdentityJoiner: Joiner} = markout;\n\t\tfor (const heading of fragment.querySelectorAll(\n\t\t\t`h1:not([id]):not(:empty),h2:not([id]):not(:empty),h3:not([id]):not(:empty)`,\n\t\t)) {\n\t\t\tconst [, identity] = Identity.exec(heading.textContent) || '';\n\t\t\tif (!identity) continue;\n\t\t\tconst anchor = document.createElement('a');\n\t\t\tanchor.id = identity\n\t\t\t\t.replace(Prefixer, '')\n\t\t\t\t.replace(Joiner, '-')\n\t\t\t\t.toLowerCase();\n\t\t\theading.before(anchor);\n\t\t\tanchor.append(heading);\n\t\t}\n\t}\n\n\tnormalizeParagraphsInFragment(fragment) {\n\t\tfor (const paragraph of fragment.querySelectorAll(':not(code) p'))\n\t\t\t(paragraph.textContent && paragraph.textContent.trim()) || paragraph.remove();\n\t}\n\n\trenderSourceTextsInFragment(fragment) {\n\t\tconst promises = [];\n\n\t\tfor (const node of fragment.querySelectorAll(`[${SourceType}]:not(:empty)`))\n\t\t\tpromises.push(this.renderSourceText({element: node, sourceType: node.getAttribute(SourceType)}));\n\n\t\treturn promises.length ? Promise.all(promises) : Promise.resolve();\n\t}\n\n\tcreateRenderedMarkdownFragment(sourceText) {\n\t\tlet fragment, normalizedText, tokens;\n\t\tconst {template = (this.template = document.createElement('template'))} = this;\n\t\ttemplate.innerHTML = markout.render((tokens = markout.tokenize((normalizedText = markout.normalize(sourceText)))));\n\t\tfragment = template.content.cloneNode(true);\n\t\tfragment.fragment = fragment;\n\t\tfragment.sourceText = sourceText;\n\t\tfragment.normalizedText = normalizedText;\n\t\tfragment.tokens = tokens;\n\t\treturn fragment;\n\t}\n\n\tasync renderMarkdown(sourceText = this.sourceText, slot = this['::content']) {\n\t\tconst {fragment} = this.createRenderedMarkdownFragment(sourceText);\n\n\t\tslot.innerHTML = '';\n\n\t\tCONTENT_NORMALIZATION !== false &&\n\t\t\t((BREAKS_NORMALIZATION || CONTENT_NORMALIZATION === true) && this.normalizeBreaksInFragment(fragment),\n\t\t\t(HEADINGS_NORMALIZATION || CONTENT_NORMALIZATION === true) && this.normalizeHeadingsInFragment(fragment),\n\t\t\t(PARAGRAPHS_NORMALIZATION || CONTENT_NORMALIZATION === true) && this.normalizeParagraphsInFragment(fragment));\n\n\t\tSOURCE_TEXT_RENDERING && (await this.renderSourceTextsInFragment(fragment));\n\n\t\tslot.appendChild(fragment);\n\t}\n\n\t/**\n\t * @param {HTMLElement} element\n\t * @param {string} [sourceType]\n\t * @param {string} [sourceText]\n\t */\n\tasync renderSourceText({element, sourceType, sourceText}) {\n\t\t!element ||\n\t\t\t!(sourceType || (sourceType = element.getAttribute(SourceType))) ||\n\t\t\t!(sourceText || (sourceText = (!element.hasAttribute(MarkupSyntax) && element.textContent) || '')) ||\n\t\t\tvoid element.removeAttribute(SourceType) ||\n\t\t\tvoid element.setAttribute(MarkupSyntax, sourceType) ||\n\t\t\t(element.textContent = '') ||\n\t\t\telement\n\t\t\t\t.appendChild(\n\t\t\t\t\tawait markup.render((element.sourceText = sourceText), {\n\t\t\t\t\t\tsourceType,\n\t\t\t\t\t\tfragment: document.createDocumentFragment(),\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t\t.normalize();\n\t}\n\n\t/// Properties\n\tget sourceText() {\n\t\tconst {childNodes, firstElementChild, renderedText} = this;\n\t\tif (renderedText || renderedText === '') return renderedText;\n\n\t\tif (firstElementChild && firstElementChild.nodeName === 'TEMPLATE') return firstElementChild.innerHTML.trim() || '';\n\n\t\tif (childNodes.length) {\n\t\t\tconst innerHTML = this.innerHTML;\n\t\t\tconst [, indent] = /^\\n?([ \\t*]*|)/.exec(innerHTML);\n\t\t\treturn indent ? innerHTML.replace(new RegExp(`^${indent}`, 'mg'), '') : innerHTML.trim() || '';\n\t\t}\n\t}\n\n\tset sourceText(sourceText) {\n\t\tthis.renderContent(sourceText);\n\t}\n}\n\ntry {\n\tMarkoutContent.shadowRoot = {mode: 'closed'};\n\n\tMarkoutContent.styles = styles;\n\n\tMarkoutContent.template = html`\n\t\t<slot inert hidden style=\"display:none;\"></slot>\n\t\t<slot id=\"styles\" name=\"styles\"></slot>\n\t\t<div id=\"links\"></div>\n\t\t<div id=\"wrapper\">\n\t\t\t<slot id=\"content\" class=\"markout-content\" name=\"content\"></slot>\n\t\t</div>\n\t`;\n\n\tcustomElements.define('markout-content', MarkoutContent);\n} catch (exception) {\n\tconsole.warn(exception);\n}\n\nconst START_OF_TEXT = '\\x02';\nconst CARRIAGE_RETURN = '\\x0D';\nconst LINE_FEED = '\\x0A';\nconst START_OF_CONTENT = START_OF_TEXT;\n\n/** @typedef {HTMLSlotElement} SLOT */\n/** @typedef {HTMLDivElement} DIV */\n","﻿const RewritableURL = /^(\\.*(?=\\/)[^?#\\n]*\\/)(?:([^/?#\\n]+?)(?:(\\.[a-z]+)|)|)(\\?[^#]+|)(#.*|)$|/i;\n\nconst {dir, dirxml, group, groupCollapsed, groupEnd, log} = console;\n\nexport const rewriteAnchors = (\n\tanchors,\n\t{sourceURL, baseURL, search, rootNode = document, debugging = import.meta['debug:hashout:anchor-rewrite']},\n) => {\n\tdebugging && groupCollapsed('%O ‹anchors› ', rootNode);\n\n\tfor (const anchor of anchors) {\n\t\tconst [matched, parent, name, extension = '.md', query = '', hash = ''] = RewritableURL.exec(\n\t\t\tanchor.getAttribute('href'),\n\t\t);\n\n\t\tdebugging && log({matched, parent, name, extension, query, hash});\n\n\t\tif (parent) {\n\t\t\tconst pathname = `${parent}${name ? `${name}${extension}` : ''}`;\n\n\t\t\tconst href =\n\t\t\t\tname && extension.toLowerCase() === '.md'\n\t\t\t\t\t? `${baseURL}${search}#${new URL(pathname, sourceURL).pathname}`\n\t\t\t\t\t: new URL(`${pathname}${query || ((!hash && search) || '')}${hash}`, sourceURL);\n\t\t\tanchor.href = href;\n\t\t} else {\n\t\t\tanchor.target || (anchor.target = '_blank');\n\t\t}\n\n\t\tdebugging && dirxml(anchor);\n\t}\n\n\tdebugging && groupEnd();\n};\n\n/// Debugging\nimport {debugging} from '/markout/lib/helpers.js';\n\ndebugging('hashout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\ttypeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bhashout|$)\\b/.test(location.search),\n\t'anchor-rewrite',\n]);\n","﻿import '../../../quench/elements/markout-content.js';\nimport * as hashout from './hashout.js';\n\n(async () => {\n\tawait customElements.whenDefined('markout-content');\n\n\t/**\n\t * @typedef {HTMLAnchorElement} Anchor\n\t */\n\tclass MarkoutContent {\n\t\tasync load(src) {\n\t\t\tlet error;\n\t\t\targuments.length || (src = this.getAttribute('src'));\n\t\t\tif (!src) return;\n\t\t\tconst url = new URL(src, this.baseURI);\n\t\t\t// const previous = this.sourceURL;\n\t\t\t// try {\n\t\t\t// const loading = loadTextFrom(url);\n\t\t\tconst response = await fetch(url);\n\t\t\tif (!response.ok) throw Error(`Failed to fetch ${url}`);\n\t\t\tconst text = await response.text();\n\t\t\tthis.sourceURL = url;\n\t\t\tthis.sourceText = text || '';\n\t\t\t// return;\n\t\t\t// (error = loading.error) || ((this.sourceURL = url), (this.sourceText = text));\n\t\t\t// }\n\t\t\t// catch (exception) {\n\t\t\t// \terror = (exception.stack, exception);\n\t\t\t// }\n\t\t\t// if (error) {\n\t\t\t// \t// if (previous) this.sourceURL = previous;\n\t\t\t// \tthrow error;\n\t\t\t// }\n\t\t\t// return;\n\t\t}\n\n\t\t/**\n\t\t * @typedef {Array<Anchor>} Anchors\n\t\t * @param {Anchors} anchors\n\t\t */\n\t\trewriteAnchors(...anchors) {\n\t\t\tconst debugging = import.meta['debug:markout:anchor-rewrite'];\n\t\t\tconst rootNode = this;\n\t\t\tconst {sourceURL, baseURL = `/markout/`} = rootNode;\n\t\t\tconst search = location.search || '';\n\t\t\thashout.rewriteAnchors(anchors.flat(), {debugging, sourceURL, baseURL, search, rootNode});\n\t\t}\n\t}\n\n\tconst sections = document.body.querySelectorAll('markout-content[src]');\n\tif (sections) {\n\t\tconst {load, rewriteAnchors} = MarkoutContent.prototype;\n\t\tfor (const section of sections) {\n\t\t\tsection.load || ((section.load = load), section.rewriteAnchors || (section.rewriteAnchors = rewriteAnchors)),\n\t\t\t\tsection.load().catch(exception => (section.sourceText = `<pre>${exception}</pre>`));\n\t\t}\n\t}\n})();\n\n/// Debugging\nimport {debugging} from '/markout/lib/helpers.js';\n\n// console.log(import.meta.url, /[?&]debug\\b/.test(import.meta.url));\n\ndebugging('markout', import.meta, [\n\t// import.meta.url.includes('/markout/lib/') ||\n\t// /[?](?:.*[&]|)debug\\b/.test(import.meta.url) ||\n\t// (typeof location === 'object' && /[?&]debug(?=[&#]|=[^&]*\\bmarkout|$)\\b/.test(location.search)),\n\t/[?&]debug\\b/.test(import.meta.url) || /[?&]debug\\b/.test(location.search),\n\t'anchor-rewrite',\n]);\n"],"names":["assign","defineProperty","defineProperties","getOwnPropertyDescriptor","getOwnPropertyNames","document","window","process","ALIASES","tokenizeMarkup","SourceType","MarkupSyntax","markout.render","markout.tokenize","markout.normalize","markup.render","hashout.rewriteAnchors"],"mappings":"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"}
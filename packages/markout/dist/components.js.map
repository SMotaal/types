{"version":3,"file":"components.js","sources":["../../components/lib/css.js","../../components/lib/templates.js","../../components/lib/component.js","../../components/lib/attributes.js","../../components/lib/globals.js","../../components/lib/async.js","../../components/lib/links.js","../../components/lib/assets.js","../../packages/markout/lib/components.js"],"sourcesContent":["// @ts-check\n\nexport const debugging = {};\n\n/** @type {TaggedTemplate<string, any>} */\nexport const css = (options => {\n  const {raw} = String;\n\n  options = {...options};\n  const prefixed = [...options.prefixed];\n  const prefixes = {'[default]': undefined, ...options.prefixes};\n  prefixes['[default]'] = Object.freeze(prefixes['[default]'] || ['-webkit', '-moz']);\n  for (const prefix of prefixed) {\n    prefixes[prefix] || (prefixes[prefix] = prefixes['[default]']);\n  }\n  Object.freeze(prefixes);\n  const NOTHING = raw`-\\/\\*\\*\\/-`;\n  const COMMENT = raw`\\/\\*[^]*?\\*\\/`;\n  const SEGMENT = raw`\\s*\\b({{property}})\\b\\s*:\\s*([^]+?)\\s*;`\n    .replace('{{property}}', prefixed.join('|') || NOTHING)\n    .replace(/{{.*?}}/g, NOTHING);\n  const IGNORED = raw`.*?`;\n  const CSS = raw`${COMMENT}|(${SEGMENT})|${IGNORED}`;\n  const matcher = new RegExp(CSS, 'g');\n  const replacer = (match, segment, property, value) => {\n    let head, tail, segments, lhs, rhs;\n    if (segment) {\n      if (property) {\n        const valuePrefixes = prefixes[`${property}:${value}`];\n        const propertyPrefixes = prefixes[property];\n        if (\n          !(valuePrefixes && valuePrefixes.length) &&\n          !(propertyPrefixes && propertyPrefixes.length)\n        ) {\n          return match;\n        }\n        segment = segment.trim();\n        [head, tail] = match.split(segment);\n        segments = [match];\n        if (valuePrefixes && valuePrefixes.length) {\n          [lhs, rhs] = segment.split(/\\s*:\\s*/);\n          for (const prefix of valuePrefixes) {\n            segments.push(\n              `${head}${(propertyPrefixes && propertyPrefixes.includes(prefix) && `${prefix}-`) ||\n                ''}${lhs}: ${prefix}-${rhs}${tail}`,\n            );\n          }\n          // segments.push(match);\n        } else if (propertyPrefixes && propertyPrefixes.length) {\n          for (const prefix of propertyPrefixes) {\n            segments.push(`${head}${prefix}-${segment}${tail}`);\n          }\n        }\n        debugging.replacer &&\n          console.log(\n            '%o: %o',\n            property,\n            value,\n            // {property: propertyPrefixes, value: valuePrefixes},\n            ...segments,\n          );\n        return segments.join('');\n      }\n    }\n    return match;\n  };\n\n  const RAW_INDENT = /(?:\\\\t|[\\t ]+)*$/;\n  const RAW_TABS = /\\\\t/g;\n  const TAB = '\\t';\n  const STRING_INDENT = /^\\n?([\\t ]*)/;\n\n  /** @type {(rawString: string, value: string) => string} */\n  const reindent = (rawString, value) => {\n    const [, stringIndent] = (value && STRING_INDENT.exec(value)) || '';\n    if (stringIndent) {\n      const matcher =\n        reindent[stringIndent] ||\n        (reindent[stringIndent] = new RegExp(raw`^${stringIndent}`, 'mg'));\n      const [rawIndent] = RAW_INDENT.exec(rawString);\n      const replacer = rawIndent.replace(RAW_TABS, TAB);\n      const newValue = value.replace(matcher, replacer);\n      // console.log('%o', {\n      //   string: {rawString, rawIndent, matcher},\n      //   value: {value, stringIndent, replacer, newValue},\n      // });\n      return newValue;\n    }\n    return value;\n  };\n\n  const css = (strings, ...values) => {\n    const rawStrings = strings.raw;\n    for (let i = 0, n = rawStrings.length; n--; i++) {\n      const rawString = rawStrings[i];\n      const value = values[i];\n      if (value && typeof value === 'string') {\n        values[i] = reindent(rawString, value);\n      }\n    }\n    const source = Reflect.apply(raw, null, [strings, ...values]);\n    const style = source.replace(matcher, replacer);\n    return style;\n  };\n\n  Object.defineProperty(css, 'prefixes', {value: Object.freeze(prefixes)});\n  return css;\n})({\n  prefixes: {'backdrop-filter': ['-webkit'], position: [], 'position:sticky': ['-webkit']},\n  prefixed: ['user-select', 'backdrop-filter', 'position'],\n});\n\n/**\n * @template T, V\n * @typedef {import('./templates').TaggedTemplate<T, V>} TaggedTemplate\n */\n","// @ts-check\n/// <reference path=\"./types/global.d.ts\" />\n\nexport {css} from './css.js';\n\n/** @typedef {{raw: TemplateStringsArray['raw']}} RawStrings */\n/** @typedef {TemplateStringsArray | RawStrings} TemplateStrings */\n\n/**\n * @template T\n * @template V\n * @typedef {(strings: TemplateStrings, ...values: V[]) => T} TaggedTemplate\n */\n\n/**\n * @template T\n * @typedef {TaggedTemplate<T, {toString(): string | void} | {} | void>} StringTaggedTemplate\n */\n\n/** @type {StringTaggedTemplate<string>} */\nexport const raw = String.raw;\n\n/**\n * @template T\n * @typedef {TaggedTemplate<T, {toString(): string | void} | DocumentFragment | HTMLElement | {} | void>} HTMLTaggedTemplate\n */\n\n/** @returns {HTMLTaggedTemplate<HTMLTemplateElement>} */\nexport const template = (template = document.createElement('template')) => (strings, ...values) => {\n  let index = 0;\n  for (const value of values) {\n    typeof value === 'string' ||\n      (values[index] = `${value &&\n        ('innerHTML' in value\n          ? value.innerHTML\n          : 'childNodes' in value && value.childNodes.length\n          ? ((template.innerHTML = ''),\n            template.content.appendChild(value.cloneNode(true)),\n            template.innerHTML)\n          : value)}`);\n    index++;\n  }\n  template.innerHTML = raw(strings, ...values);\n  return template;\n};\ntemplate.html = template;\n\nexport const html = (template => {\n  /** @type {HTMLTaggedTemplate<DocumentFragment>} */\n  return (...args) => {\n    const content = document.createDocumentFragment();\n    content.appendChild(Reflect.apply(template, null, args).content);\n    return content;\n  };\n})(template());\n\n// /**\n//  * @param {TemplateStringsArray | {raw: string[]}} strings\n//  * @param {*} values\n//  * @returns {string}\n//  */\n// export function css(strings, ...values) {\n//   const source = raw(strings, ...values);\n//   const style = source.replace(css.matcher, css.matcher.replacer);\n//   console.log({style});\n//   return style;\n// }\n\n// css.prefix = ['user-select'];\n","// @ts-check\n/// <reference path=\"./types/global.d.ts\" />\n\nexport const DefaultAttributes = 'defaultAttributes';\nexport const IsInitialized = 'isInitialized';\nexport const Loaded = 'loaded';\nexport const COMPONENT_LOADING_VISIBILITY = 'hidden !important';\n\nexport const Component = (() => {\n  class Component extends HTMLElement {\n    constructor() {\n      /** @type {ComponentStyleElement} */\n      let style;\n      /** @type {DocumentFragment} */\n      let fragment;\n      /** @type {this | ShadowRoot} */\n      let root;\n\n      super();\n\n      root = new.target.shadowRoot ? this.attachShadow(new.target.shadowRoot) : this;\n\n      //@ts-ignore\n      fragment = new.target.template\n        ? new.target.template.cloneNode(true)\n        : root !== this || document.createDocumentFragment();\n\n      if (new.target.styles) {\n        root === this && (this.style.visibility = COMPONENT_LOADING_VISIBILITY);\n        // this.style.visibility = COMPONENT_LOADING_VISIBILITY;\n        (fragment || root).prepend((style = initializeComponentStyles(this, new.target)));\n      }\n\n      if (new.target.attributes && new.target.attributes.length) {\n        this.attributes[DefaultAttributes] = initializeComponentAttributes(this, new.target);\n        this.attributes[IsInitialized] = false;\n      }\n\n      if (new.target.template) {\n        for (const element of fragment.querySelectorAll('[id]')) this[`#${element.id}`] = element;\n        for (const element of fragment.querySelectorAll('slot'))\n          `::${element.name || ''}` in this || (this[`::${element.name || ''}`] = element);\n      }\n\n      new.target.initializeRoot(this, fragment, style, root);\n    }\n\n    connectedCallback() {\n      this.attributes[IsInitialized] === false && this.initializeAttributes();\n    }\n\n    attributeChangedCallback(attributeName, previousValue, nextValue) {\n      previousValue === nextValue ||\n        previousValue == nextValue ||\n        (typeof this.updateAttribute === 'function'\n          ? this.updateAttribute(attributeName, nextValue, previousValue)\n          : attributeName in this && (this[attributeName] = nextValue));\n    }\n\n    initializeAttributes() {\n      const attributes = this.attributes;\n      if (!attributes[IsInitialized] && attributes[DefaultAttributes]) {\n        attributes[IsInitialized] = true;\n        for (const attribute in attributes[DefaultAttributes])\n          this.updateAttribute(attribute, this[attribute]);\n      }\n    }\n\n    trace(detail, context = (detail && detail.target) || this, ...args) {\n      const span = typeof context === 'string' ? '%s' : '%O';\n      detail &&\n        (detail.preventDefault\n          ? console.log(`${span}‹%s› %O`, context, detail.type, detail, ...args)\n          : console.trace(`${span} %O`, context, detail, ...args));\n    }\n\n    static async initializeRoot(host, fragment, style, root) {\n      //@ts-ignore\n      style && root === host && (await new Promise(setTimeout));\n      // if (root === host) return setTimeout(() => Component.initializeRoot(host, fragment, style));\n      fragment && root.append(fragment);\n      //@ts-ignore\n      if (style) {\n        await style.loaded;\n        // await new Promise(requestAnimationFrame);\n      }\n      host.style.visibility === COMPONENT_LOADING_VISIBILITY && (host.style.visibility = '');\n    }\n  }\n\n  const {defineProperty} = Object;\n\n  /**\n   * @template {typeof Component} C\n   * @param {InstanceType<C>} component\n   * @param {C} constructor\n   */\n  const initializeComponentAttributes = (component, constructor) => {\n    const {prototype, attributes: componentAttributes} = constructor;\n    for (const attribute of componentAttributes) {\n      prototype.hasOwnProperty(attribute) ||\n        defineProperty(this, attribute, {\n          get() {\n            return this.hasAttribute(attribute)\n              ? this.getAttribute(attribute)\n              : componentAttributes[attribute];\n          },\n          set(value) {\n            value === null || value === undefined\n              ? this.removeAttribute(attribute)\n              : value === this.getAttribute(attribute) || this.setAttribute(attribute, value);\n          },\n        });\n    }\n    return componentAttributes;\n  };\n\n  const StyleElement = Symbol('styles.element');\n\n  /**\n   * @template {typeof Component} C\n   * @param {InstanceType<C>} component\n   * @param {C} constructor\n   */\n  const initializeComponentStyles = (component, constructor) => {\n    /** @type {ComponentStyleElement} */\n    const componentStyleElement =\n      constructor[StyleElement] ||\n      (constructor.styles &&\n        (constructor[StyleElement] = createComponentStyleElement(constructor.styles)));\n\n    if (componentStyleElement) return componentStyleElement.cloneStyleSheet();\n  };\n\n  /** @param {string} textContent */\n  const createComponentStyleElement = textContent => {\n    /** @type {ComponentStyleElement} */\n    const style = document.createElement('style');\n\n    style.loaded = new Promise(resolve => {\n      const handler = event => {\n        style.removeEventListener('load', handler);\n        style.removeEventListener('error', handler);\n        style.removeEventListener('abort', handler);\n        resolve();\n      };\n      style.addEventListener('load', handler, {capture: true, passive: false, once: true});\n      style.addEventListener('error', handler, {capture: true, passive: false, once: true});\n      style.addEventListener('abort', handler, {capture: true, passive: false, once: true});\n    });\n\n    style.cloneStyleSheet = () => {\n      /** @type {any} */\n      const clone = style.cloneNode(true);\n      clone.loaded = style.loaded;\n      return clone;\n    };\n\n    style.textContent = textContent;\n\n    return style;\n  };\n\n  {\n    const hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    const {defineProperty, defineProperties, getOwnPropertyDescriptor} = Object;\n\n    /**\n     * @template {string|symbol} K\n     * @template V\n     * @param {{}} target\n     * @param {K} property\n     * @param {V} value\n     */\n    const updateProperty = (target, property, value) => (\n      !target ||\n        !property ||\n        ((!hasOwnProperty(target, property) ||\n          getOwnPropertyDescriptor(target, property).configurable !== false) &&\n          defineProperty(target, property, {\n            get: () => value,\n            set: value => updateProperty(target, property, value),\n            configurable: true,\n          })),\n      target\n    );\n\n    const descriptor = {get: () => undefined, enumerable: true, configurable: true};\n\n    defineProperties(Component, {\n      attributes: {\n        set(value) {\n          updateProperty(this, 'attributes', value);\n        },\n        ...descriptor,\n      },\n      observedAttributes: {\n        set(value) {\n          updateProperty(this, 'observedAttributes', value);\n        },\n        ...descriptor,\n      },\n      shadowRoot: {\n        set(value) {\n          updateProperty(this, 'shadowRoot', value);\n        },\n        ...descriptor,\n      },\n      template: {\n        set(value) {\n          updateProperty(this, 'template', value);\n        },\n        ...descriptor,\n      },\n      styles: {\n        set(value) {\n          updateProperty(this, 'styles', value);\n        },\n        ...descriptor,\n      },\n    });\n  }\n\n  return Component;\n\n  AMBIENT: {\n    /** @type {import('./attributes').Attributes<string> | undefined} */\n    Component.attributes = undefined;\n\n    /** @type {string[]} */\n    Component.observedAttributes = undefined;\n\n    /** @type {ShadowRootInit} */\n    Component.shadowRoot = undefined;\n\n    /** @type {DocumentFragment} */\n    Component.template = undefined;\n\n    /** @type {string} */\n    Component.styles = undefined;\n\n    /** @type {<T, R, U>(attributeName: string, nextValue?: T, previousValue?: T | R) => U} */\n    Component.prototype.updateAttribute = undefined;\n  }\n})();\n\n/** @typedef {import('./attributes')['Attributes']} Attributes */\n/** @typedef {HTMLStyleElement & Partial<{cloneStyleSheet(): ComponentStyleElement, loaded?: Promise<void>}>} ComponentStyleElement */\n","export const {Toggle, Attributes} = (() => {\n  const {assign, defineProperties, getOwnPropertyNames} = Object;\n\n  /**\n   * @template T\n   * @param {T} value\n   * @returns {attribute.toggle<T>}\n   */\n  const Toggle = (matcher => value =>\n    ((value !== null && value !== undefined && typeof value !== 'symbol') || undefined) &&\n    (value === true ||\n      value == true ||\n      ((value !== '' || '') &&\n        ((value !== false && value != false) || false) &&\n        (value = matcher.exec(value) || undefined) &&\n        (value[1] ? true : value[2] ? false : undefined))))(\n    /\\b(?:(true|on|yes)|(false|off|no))\\b/i,\n  );\n\n  /**\n   * @template {string} K\n   * @extends {Array<K>}\n   */\n  class Attributes extends Array {\n    /**\n     * @param {{[index: number]:K} | {[name: K]}} attributes\n     */\n    constructor(attributes) {\n      const names =\n        (attributes &&\n          ((Symbol.iterator in attributes && attributes) || getOwnPropertyNames(attributes))) ||\n        '';\n      super(...names);\n      !attributes || names === attributes || assign(this, attributes);\n    }\n\n    *entries() {\n      for (const key of super[Symbol.iterator]()) {\n        yield [key, this[key]];\n      }\n    }\n\n    /**\n     * @template {string} K\n     * @template {{[name: K]}} T\n     * @param {...T} definitions\n     * @returns {Attributes<K> | T}\n     */\n    static from(...definitions) {\n      const attributes = {};\n\n      for (const object of definitions) {\n        for (const name of Symbol.iterator in object ? object : getOwnPropertyNames(object)) {\n          typeof name !== 'string' ||\n            (name in attributes\n              ? // Assign to undefined default\n                attributes[name] === undefined || (attributes[name] = object[name])\n              : // Add name to the set of names and initialize default\n                (attributes[name] = object[name]));\n        }\n      }\n      return new this(attributes);\n    }\n  }\n\n  defineProperties(Attributes.prototype, {\n    [Symbol.toStringTag]: {value: 'Attributes'},\n    [Symbol.isConcatSpreadable]: {value: false},\n  });\n\n  return {Attributes, Toggle};\n})();\n\n/**\n * @typedef {*} attribute.value\n * @typedef {''} attribute.empty\n * @typedef {undefined | null | symbol} attribute.undefined\n * @typedef {true | 1 | 'true' | 'on' | 'yes'} attribute.true\n * @typedef {false | 0 | 'false' | 'off' | 'no'} attribute.false\n */\n\n/**\n * @template T\n * @typedef {T extends attribute.true ? true : T extends attribute.false ? false : T extends attribute.empty ? '' : undefined} attribute.toggle\n */\n","// @ts-check\n/// <reference path=\"./types/global.d.ts\" />\n/// <reference types=\"node\" />\n\nexport const globals = {};\n\nconst currentGlobal = (globals.global =\n  typeof global === 'object' && global && global.global === global && global);\nexport {currentGlobal as global};\n\nconst currentProcess = (globals.process =\n  currentGlobal && typeof currentGlobal.process === 'object' && currentGlobal.process);\nexport {currentProcess as process};\n\nconst currentSelf = (globals.self = typeof self === 'object' && self && self.self === self && self);\nexport {currentSelf as self};\n\nconst currentWindow = (globals.window =\n  typeof window === 'object' && window.window === window && window);\nexport {currentWindow as window};\n\nconst currentDocument = (globals.document = typeof document === 'object' && document);\nexport {currentDocument as document};\n\n/** @type {FunctionConstructor} */\n// @ts-ignore\nglobals.Function = function() {}.constructor;\n/** @type {ObjectConstructor} */\n// @ts-ignore\nglobals.Object = {}.constructor;\n\n/// Functions\n\nexport const bind = globals.Function.bind.bind(globals.Function.call);\nexport const call = globals.Function.call.bind(globals.Function.call);\n\n/// Objects\n/** @type {ObjectConstructor} */\n// @ts-ignore\nexport const {\n  assign,\n  defineProperty,\n  defineProperties,\n  create,\n  freeze,\n  seal,\n  preventExtensions,\n  getOwnPropertyDescriptor,\n  getOwnPropertyDescriptors,\n  getOwnPropertyNames,\n  getOwnPropertySymbols,\n  getPrototypeOf,\n  setPrototypeOf,\n  entries,\n  keys,\n  values,\n  // prototype: {isPrototypeOf: ObjectIsPrototypeOf, hasOwnProperty: ObjectHasOwnProperty},\n} = globals.Object.constructor;\n\n/**\n * @type {<T>(prototype: T, object) => object is T}\n */\nexport const isPrototypeOf = globals.Function.call.bind(globals.Object.prototype.isPrototypeOf);\n\n/**\n * @type {<U extends string|symbol|number>(object: {}, property: U) => boolean}\n */\nexport const hasOwn = globals.Function.call.bind(globals.Object.prototype.hasOwnProperty);\n\nexport default globals;\n","﻿//@ts-check\nexport const awaitAll = async (...values) => void (await Promise.all(values.flat()));\n\nexport const resolvedPromise = Promise.resolve();\n\n/**\n * @template T, U\n * @param {iterable<T>} iterable\n * @param {(value: T) => U | Promise<U>} ƒ\n * @param {U | T} [value]\n */\nexport async function each(iterable, ƒ, value) {\n  /** @type {iterates<T>} */\n  const iterator =\n    (iterable && ('next' in iterable && typeof iterable.next === 'function' && iterable)) ||\n    ((Symbol.asyncIterator in iterable && iterable[Symbol.asyncIterator]()) ||\n      (Symbol.iterator in iterable && iterable[Symbol.iterator]()));\n  try {\n    let result, done;\n    let received = arguments.length > 2;\n    let value = arguments[2];\n    while (!done && (result = received ? iterator.next(value) : iterator.next())) {\n      ({done, value} = typeof result.then !== 'function' ? await result : result);\n      received =\n        undefined !==\n        ((value = ƒ(\n          value && 'then' in value && typeof value.then === 'function' ? await value : value,\n        )) &&\n        'then' in value &&\n        typeof value.then === 'function'\n          ? (value = await value)\n          : value);\n    }\n  } finally {\n    iterator &&\n      iterable !== iterator &&\n      'return' in iterator &&\n      typeof iterator.return === 'function' &&\n      iterator.return();\n  }\n}\n\n/**\n * @template T\n * @typedef {import('./types/async').iterable<T>} iterable<T>\n */\n\n/**\n * @template T\n * @typedef {import('./types/async').iterates<T>} iterates<T>\n */\n","﻿import {document} from './globals.js';\nimport {resolvedPromise} from './async.js';\n\nexport const resolve = (specifier, referrer) => {\n  try {\n    return `${referrer === undefined ? new URL(specifier) : new URL(specifier, referrer)}`;\n  } catch (exception) {}\n};\n\nexport const preloading =\n  (!document && {}) || document.links['[[preload]]'] || (document.links['[[preload]]'] = {});\n\nexport const preload = (src => {\n  const preload = (href, as) => {\n    let promise = preloading[href];\n    if (!promise) {\n      const {types, extensions, base} = preload;\n      try {\n        const url = new URL(href, preload.base);\n        if (!as) {\n          let [, extension] = /\\.([^/.]+)$|/.exec(url.pathname.toLowerCase());\n          if (!(extension in extensions))\n            return Promise.reject(\n              new TypeError(\n                `Cannot preload \"${url}\"${\n                  extension\n                    ? ` - extension $\"{extension}\" is not supported`\n                    : ' - cannot infer type'\n                }.`,\n              ),\n            );\n          as = preload.extensions[as];\n        } else if (!types[(as = `${as}`.toLowerCase())]) {\n          return Promise.reject(\n            new TypeError(`Cannot preload \"${url}\" - type \"${as}\" is not supported.`),\n          );\n        }\n        promise =\n          preloading[url] ||\n          (promise = preloading[href] = preloading[url] = createPreloadPromise({href, as}));\n      } catch (exception) {\n        return Promise.reject(exception);\n      }\n    }\n    return promise;\n  };\n\n  const createPreloadPromise = ({\n    href,\n    url = href,\n    as,\n    document: ownerDocument = document,\n    initiator = import.meta.url,\n  }) => {\n    if (!ownerDocument) {\n      document ||\n        preload.promise.warned ||\n        (preload.promise.warned = !console.warn('[preload]: Preload is not supported.'));\n      return resolvedPromise;\n    }\n    const {head = document.head} = ownerDocument;\n\n    const type = types[as] || types[`${as}`.toLowerCase()] || as;\n\n    const preloads = head.querySelectorAll(`link[rel=preload][as=\"${type}\"]`);\n\n    if (\n      type === 'style' &&\n      Array.prototype.find.call(ownerDocument.styleSheets, ({href}) => href === href)\n    ) {\n      return resolvedPromise;\n    } else if (\n      type === 'script' &&\n      Array.prototype.find.call(ownerDocument.scripts, ({src}) => src === href)\n    ) {\n      return resolvedPromise;\n    } else if (preloads && preloads.length) {\n      url.pathname && (url.pathname = url.pathname.replace(/\\/+/g, '/'));\n      const href = `${url}`;\n      for (const link of preloads) {\n        if (link.href === href) return resolvedPromise;\n        // console.log({href, url, 'link.href': link.href});\n      }\n    }\n\n    let link = ownerDocument.createElement('link');\n    const promise = Object.defineProperties(\n      new Promise((resolve, reject) => {\n        let done = event =>\n          void (link.removeEventListener('abort', done),\n          link.removeEventListener('error', done),\n          link.removeEventListener('load', done),\n          (done = resolve()),\n          (promise.loaded = event.type === 'load') ||\n            ((event.error && (promise.error = event.error)) || (promise[event.type] = true)));\n        link.addEventListener('abort', done, {once: true});\n        link.addEventListener('error', done, {once: true});\n        link.addEventListener('load', done, {once: true});\n      }).finally(() => {\n        Object.defineProperty(promise, 'link', {value: (link = link.remove())});\n      }),\n      {link: {value: link, configurable: true}, initiator: {value: initiator}},\n    );\n\n    link.href = url;\n    link.rel = 'preload';\n    link.as = type;\n    // as && (link.as = types[as] || types[`${as}`.toLowerCase()] || as);\n    head.appendChild(link);\n    return promise;\n  };\n\n  const base = (preload.base = `${(typeof location === 'object' &&\n    typeof location.href === 'string' &&\n    location) ||\n    new URL(src.replace(/\\/lib\\/.*?$/i, ''))}`);\n  const types = (preload.types = {});\n  const extensions = (preload.extensions = {});\n\n  types.fetch = 'fetch';\n  extensions.js = types.script = types.module = 'script';\n  extensions.css = types.stylesheet = types.style = 'style';\n  extensions.html = types.document = 'document';\n\n  return preload;\n})(import.meta.url);\n","﻿import {window, document, process} from './globals.js';\nimport {resolve, preload} from './links.js';\nimport {resolvedPromise, awaitAll} from './async.js';\n\nconst root =\n  (document && document.baseURI && new URL('./', document.baseURI)) ||\n  (window && window.location && new URL('./', window.location)) ||\n  (process && process.cwd && new URL(`file://${process.cwd()}`)) ||\n  new URL('../', import.meta.url);\n\nconst BASE = '[[base]]';\nconst SCRIPTS = '[[scripts]]';\nconst STYLES = '[[styles]]';\nconst PRELOAD = '[[preload]]';\nconst types = {\n  script: SCRIPTS,\n  style: STYLES,\n};\n\nexport class Asset extends URL {\n  constructor(href, type) {\n    super(href);\n    this.type = type;\n    Object.defineProperties(this, Object.getOwnPropertyDescriptors(Object.freeze({...this})));\n  }\n\n  get [PRELOAD]() {\n    const value = preload(this, this.type);\n    // const value =\n    //   this.type === 'style' &&\n    //   Array.prototype.find.call(document.styleSheets, ({href}) => (href = this.href))\n    //     ? resolvedPromise\n    //     : preload(this, this.type);\n    Object.defineProperty(this, PRELOAD, {value});\n    return value;\n  }\n\n  then(ƒ) {\n    return this[PRELOAD].then(ƒ);\n  }\n\n  catch(ƒ) {\n    return this[PRELOAD].catch(ƒ);\n  }\n\n  finally(ƒ) {\n    return this[PRELOAD].finally(ƒ);\n  }\n}\n\nexport class Assets {\n  /** @typedef {{base: string}} Options */\n  /** @typedef {string} specifier */\n  /** @param {Options} [options] */\n  /** @param {... specifier} [specifiers] */\n  constructor(options, ...specifiers) {\n    const assets = {script: {}, style: {}};\n\n    const {base = `${root}`} = {\n      ...(((!arguments.length || typeof options === 'object') && options) ||\n        (options = void ([...specifiers] = arguments))),\n    };\n\n    const descriptors = {\n      [BASE]: {value: base},\n\n      [SCRIPTS]: {\n        get: () => {\n          const promise = awaitAll(Object.values(assets.script));\n          Object.defineProperty(this, SCRIPTS, {value: promise});\n          return promise;\n        },\n        configurable: true,\n      },\n\n      [STYLES]: {\n        get: () => {\n          const promise = awaitAll(Object.values(assets.style));\n          Object.defineProperty(this, STYLES, {value: promise});\n          return promise;\n        },\n        configurable: true,\n      },\n    };\n\n    for (const specifier of specifiers) {\n      let [, type, href] = /^(?:(style|script|fetch):|)(.*)$/.exec(specifier);\n      // const preloading = as && preload(specifier, as);\n\n      if (!type || !(type in assets || (type = `${type}`.toLowerCase()) in assets)) {\n        console.log({specifier, type, href});\n        continue;\n      }\n\n      const url = resolve(href, base);\n      url.startsWith(base) && (href = url.replace(base, ''));\n      const id = `${type}:${href}`;\n\n      Object.defineProperty(\n        assets[type],\n        href,\n        (descriptors[id] = {value: new Asset(url, type), enumerable: true}),\n      );\n\n      id !== specifier && (descriptors[specifier] = {get: () => this[id]});\n    }\n\n    Object.defineProperties(this, descriptors);\n  }\n\n  resolve(specifier, referrer = this[BASE]) {\n    return resolve(specifier, referrer);\n  }\n\n  static resolve(specifier, referrer = root) {\n    return resolve(specifier, referrer);\n  }\n}\n","﻿/** @package components */\nexport {html, raw} from '/components/lib/templates.js';\n/** @package components */\nexport {css} from '/components/lib/css.js';\n/** @package components */\nexport {Component} from '/components/lib/component.js';\n/** @package components */\nexport {Attributes, Toggle} from '/components/lib/attributes.js';\n/** @package components */\nexport {Assets} from '/components/lib/assets.js';\n"],"names":["this","document","window","process"],"mappings":"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"}